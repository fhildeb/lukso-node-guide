"use strict";(globalThis.webpackChunklukso_node_guide=globalThis.webpackChunklukso_node_guide||[]).push([[157],{6242(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"theory/node-operation/disk-management","title":"Disk Management","description":"Learn how to manage LUKSO node storage using LVM, proper partitioning, and filesystem structure to ensure scalability, performance, and uptime.","source":"@site/docs/theory/node-operation/disk-management.md","sourceDirName":"theory/node-operation","slug":"/theory/node-operation/disk-management","permalink":"/docs/theory/node-operation/disk-management","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_label":"Disk Management","sidebar_position":10,"description":"Learn how to manage LUKSO node storage using LVM, proper partitioning, and filesystem structure to ensure scalability, performance, and uptime."},"sidebar":"theorySidebar","previous":{"title":"SSH and VPN Tunnel","permalink":"/docs/theory/node-operation/ssh-and-vpn-tunnel"},"next":{"title":"Utility Tools","permalink":"/docs/theory/node-operation/utility-tools"}}');var t=i(4848),o=i(8453);const r={sidebar_label:"Disk Management",sidebar_position:10,description:"Learn how to manage LUKSO node storage using LVM, proper partitioning, and filesystem structure to ensure scalability, performance, and uptime."},a="Disk Management",l={},d=[{value:"Logical Volume Manager",id:"logical-volume-manager",level:2},{value:"Storage Components",id:"storage-components",level:2},{value:"Filesystem Metadata",id:"filesystem-metadata",level:2},{value:"Volume Sizing",id:"volume-sizing",level:2},{value:"Disk Encryption",id:"disk-encryption",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"disk-management",children:"Disk Management"})}),"\n",(0,t.jsx)(n.p,{children:"Managing storage is essential when running a blockchain node, particularly for handling large and continuously growing datasets. Using flexible volume management, proper filesystem types, and well-structured partitioning can significantly improve system reliability and future maintenance."}),"\n",(0,t.jsx)(n.h2,{id:"logical-volume-manager",children:"Logical Volume Manager"}),"\n",(0,t.jsx)(n.p,{children:"LVM is a storage management system that offers flexibility in managing disk space. It allows pooling of several physical disks into a consistent storage pool, known as a volume group, from which logical volumes are created. The system is especially useful for those planning for several nodes, expecting storage growth, and avoiding re-partitioning, as it allows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Easy resizing of partitions"}),"\n",(0,t.jsx)(n.li,{children:"Grouping storage across multiple physical disks"}),"\n",(0,t.jsx)(n.li,{children:"Clean logical structure for service-specific storage"}),"\n",(0,t.jsx)(n.li,{children:"Adding new disks without downtime"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Industry Standard",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["LVM is the default partitioning method on \ud83d\udd36 ",(0,t.jsx)(n.a,{href:"https://ubuntu.com/download",children:(0,t.jsx)(n.strong,{children:"Ubuntu"})})," from version ",(0,t.jsx)(n.em,{children:"20.04"})," and above."]}),"\n",(0,t.jsxs)(n.li,{children:["\ud83c\udfa8 ",(0,t.jsx)(n.a,{href:"https://dappnode.com/",children:(0,t.jsx)(n.strong,{children:"DAppNode"})})," machines also ship with LVM pre-enabled."]}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"storage-components",children:"Storage Components"}),"\n",(0,t.jsx)(n.p,{children:"Within the Logical Volume Manager there are several terminologies and concepts."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Abbreviation"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)("nobr",{children:" Physical Volume "})}),(0,t.jsx)(n.td,{children:"PV"}),(0,t.jsx)(n.td,{children:"The underlying physical storage disk or partition that is added to a volume group."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)("nobr",{children:" Logical Volume "})}),(0,t.jsx)(n.td,{children:"LV"}),(0,t.jsx)(n.td,{children:"A flexible storage partition carved out of a volume group."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)("nobr",{children:" Volume Group "})}),(0,t.jsx)(n.td,{children:"VG"}),(0,t.jsxs)(n.td,{children:["A collection of physical volumes pooled together into a single logical unit. ",(0,t.jsx)("br",{})," ",(0,t.jsx)(n.strong,{children:"\u2192"})," ",(0,t.jsx)(n.em,{children:"Logical volumes are created from these groups"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)("nobr",{children:" Physical Extent "})}),(0,t.jsx)(n.td,{children:"PE"}),(0,t.jsxs)(n.td,{children:["A fixed-size chunk of space used to manage allocation within a volume group. ",(0,t.jsx)("br",{})," ",(0,t.jsx)(n.strong,{children:"\u2192"})," ",(0,t.jsx)(n.em,{children:"Logical volumes are built from these chunks"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)("nobr",{children:" Logical Extent "})}),(0,t.jsx)(n.td,{children:"LE"}),(0,t.jsx)(n.td,{children:"Each logical volume consists of multiple logical extents mapped to physical extents."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)("nobr",{children:" Allocated Extents "})}),(0,t.jsx)(n.td,{children:"\u2014"}),(0,t.jsx)(n.td,{children:"All Physical Extents that are currently assigned to one or more logical volumes."})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"Logical volumes can span across multiple hardware disks and can be resized dynamically."})}),"\n",(0,t.jsx)(n.h2,{id:"filesystem-metadata",children:"Filesystem Metadata"}),"\n",(0,t.jsx)(n.p,{children:"Each file system keeps track of data by using index nodes and descriptor blocks. When volume or filesystem expansion occurs, new index nodes and descriptor blocks are created as needed to define and manage additional storage space."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Component"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Index Nodes"})}),(0,t.jsx)(n.td,{children:"Track metadata like file size, ownership, and timestamps"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Descriptor Blocks"})}),(0,t.jsx)(n.td,{children:"Map index nodes to actual physical extends, used during file creation and modification"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"LVM Metadata is stored on each physical volume to hold configuration data about volume groups and logical volumes."})}),"\n",(0,t.jsx)(n.h2,{id:"volume-sizing",children:"Volume Sizing"}),"\n",(0,t.jsx)(n.p,{children:"LVM sets a default size for the root logical volume during server installation to leave headroom for future expansions."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"It's safer to grow volumes than shrink them."}),"\n",(0,t.jsx)(n.li,{children:"Shrinking involves more steps and risks, including potential data loss."}),"\n",(0,t.jsx)(n.li,{children:"This approach allows resizing after performance benchmarking or growth."}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["More advanced instructions for resizing, expanding volumes, or adding disks can be found in the ",(0,t.jsx)(n.a,{href:"/docs/guides/system-setup/disk-volumes",children:(0,t.jsx)(n.strong,{children:"Disk Volumes"})})," guide."]})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["The \ud83d\udd38 ",(0,t.jsx)(n.a,{href:"/docs/guides/system-setup/disk-volumes",children:(0,t.jsx)(n.strong,{children:"Ubuntu Server"})})," installation configured LVM with a default logical volume size of ",(0,t.jsx)(n.code,{children:"100GB"}),"."]})}),"\n",(0,t.jsx)(n.h2,{id:"disk-encryption",children:"Disk Encryption"}),"\n",(0,t.jsx)(n.p,{children:"Encrypting the entire disk ensures maximum data protection but introduces complexity for maintenance or restarts."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Full disk encryption requires manual decryption on every boot."}),"\n",(0,t.jsx)(n.li,{children:"Remote connections and unlocking setups are extremely complex and harder to maintain."}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["For most node setups, ",(0,t.jsx)(n.strong,{children:"full disk encryption"})," adds a barrier and ",(0,t.jsx)(n.strong,{children:"is not recommended"}),"."]})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"The node's wallet and validator keys are encrypted independently. If needed, smaller encrypted partitions can be added after the regular node setup was completed. This might include extended service automation or sensitive data folders."})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var s=i(6540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);