"use strict";(self.webpackChunklukso_node_guide=self.webpackChunklukso_node_guide||[]).push([[6901],{1470:(e,n,a)=>{a.d(n,{A:()=>w});var t=a(6540),s=a(4164),r=a(3104),i=a(6347),o=a(205),l=a(7485),c=a(1682),d=a(679);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:a,default:t}})=>({value:e,label:n,attributes:a,default:t})))}(a);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function f({queryString:e=!1,groupId:n}){const a=(0,i.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(a.location.search);n.set(s,e),a.replace({...a.location,search:n.toString()})}),[s,a])]}function m(e){const{defaultValue:n,queryString:a=!1,groupId:s}=e,r=h(e),[i,l]=(0,t.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[c,u]=f({queryString:a,groupId:s}),[m,y]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,s]=(0,d.Dv)(n);return[a,(0,t.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:s}),g=(()=>{const e=c??m;return p({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{g&&l(g)}),[g]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),y(e)}),[u,y,r]),tabValues:r}}var y=a(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(4848);function b({className:e,block:n,selectedValue:a,selectValue:t,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),r=i[s].value;r!==a&&(l(n),t(r))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;n=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;n=o[a]??o[o.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:t})=>(0,x.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...t,className:(0,s.A)("tabs__item",g.tabItem,t?.className,{"tabs__item--active":a===e}),children:n??e},e)))})}function v({lazy:e,children:n,selectedValue:a}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function j(e){const n=m(e);return(0,x.jsxs)("div",{className:(0,s.A)("tabs-container",g.tabList),children:[(0,x.jsx)(b,{...n,...e}),(0,x.jsx)(v,{...n,...e})]})}function w(e){const n=(0,y.A)();return(0,x.jsx)(j,{...e,children:u(e.children)},String(n))}},6836:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"guides/external-access/tailscale","title":"10.1 Tailscale","description":"Set up Tailscale VPN for secure remote access to your LUKSO node. Learn how to install Tailscale, configure auto-start, update SSH settings, and access Grafana dashboards from anywhere.","source":"@site/docs/guides/external-access/tailscale.md","sourceDirName":"guides/external-access","slug":"/guides/external-access/tailscale","permalink":"/docs/guides/external-access/tailscale","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"10.1 Tailscale","sidebar_position":1,"description":"Set up Tailscale VPN for secure remote access to your LUKSO node. Learn how to install Tailscale, configure auto-start, update SSH settings, and access Grafana dashboards from anywhere."},"sidebar":"guidesSidebar","previous":{"title":"9.5 Selfnodes Alerts","permalink":"/docs/guides/alert-systems/selfnode-alerts"},"next":{"title":"11.1 Software Updates","permalink":"/docs/guides/maintenance/software-updates"}}');var s=a(4848),r=a(8453),i=a(1470),o=a(9365);const l={sidebar_label:"10.1 Tailscale",sidebar_position:1,description:"Set up Tailscale VPN for secure remote access to your LUKSO node. Learn how to install Tailscale, configure auto-start, update SSH settings, and access Grafana dashboards from anywhere."},c="10.1 Tailscale",d={},u=[{value:"1. Software Installation",id:"1-software-installation",level:2},{value:"2. Configure Auto Startup",id:"2-configure-auto-startup",level:2},{value:"3. Update SSH Config",id:"3-update-ssh-config",level:2},{value:"4. Update Grafana Dashboard",id:"4-update-grafana-dashboard",level:2},{value:"5. Disable Key Expiry",id:"5-disable-key-expiry",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"101-tailscale",children:"10.1 Tailscale"})}),"\n",(0,s.jsx)(n.p,{children:"Tailscale is a modern VPN service that allows you to create a secure, encrypted connection between your devices using a simple and user-friendly interface. It is especially useful for remote server access, such as connecting to your node from anywhere in the world without exposing public ports or relying on complicated firewall configurations."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Further details about SSH and VPN protocols can be found on the ",(0,s.jsx)(n.a,{href:"/docs/theory/node-operation/ssh-and-vpn-tunnel",children:(0,s.jsx)(n.strong,{children:"SSH and VPN Tunnel"})})," page in the \ud83e\udde0 ",(0,s.jsx)(n.a,{href:"/docs/theory/preparations/node-specifications",children:(0,s.jsx)(n.strong,{children:"Theory"})})," section."]})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The following steps are performed on your \ud83d\udcdf ",(0,s.jsx)(n.strong,{children:"node server"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"1-software-installation",children:"1. Software Installation"}),"\n",(0,s.jsxs)(n.p,{children:["Visit the ",(0,s.jsx)(n.a,{href:"https://tailscale.com/",children:"Tailscale Webpage"})," and register for the service. It's a free for a limited amount of users and devices. After logging in with your favorite identity provider, you will be prompted to connect your first two devices. Click on ",(0,s.jsx)(n.em,{children:"Linux"})," to connect your node."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get update\nsudo apt-get install tailscale\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can also enable auto-updates for Tailscale."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"tailscale set --auto-update\n"})}),"\n",(0,s.jsx)(n.p,{children:"After the installation, activate Tailscale."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"tailscale up\n"})}),"\n",(0,s.jsx)(n.p,{children:"You will receive a link that you must copy and paste to the terminal of your node in order to connect the device with your account."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Continue with the second device, like your personal computer or smartphone. The Guide on the Tailscale webpage will give you a selection of possible installations. After activating Tailscale on both, your devices will be able to communicate."})}),"\n",(0,s.jsx)(n.h2,{id:"2-configure-auto-startup",children:"2. Configure Auto Startup"}),"\n",(0,s.jsxs)(n.p,{children:["Tailscale comes with its own CLI tool called ",(0,s.jsx)(n.em,{children:"tailscaled"}),". By default, it will list itself as a system service for easy maintenance. You can retreive the service's status directly from the system control or further stop, restart, or disable autostarts in a similar way."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"systemctl status tailscaled\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output should be something similar to the following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:'\u25cf tailscaled.service - Tailscale node agent\n     Loaded: loaded (/lib/systemd/system/tailscaled.service; enabled; vendor preset: enabled)\n     Active: active (running) since Fri 2023-05-19 20:01:42 UTC; 3h 19min ago\n       Docs: https://tailscale.com/kb/\n   Main PID: 1005 (tailscaled)\n     Status: "Connected; [EMAIL-ACCOUNT]; [TAILSCALE-IP] [MAC-ADDRESS]"\n      Tasks: 17 (limit: 38043)\n     Memory: 40.6M\n        CPU: 1min 29.134s\n     CGroup: /system.slice/tailscaled.service\n             \u2514\u25001005 /usr/sbin/tailscaled --state=/var/lib/tailscale/tailscaled.state --socket=/run/tailsc>\n\n[DATE] [TIME] [USER] tailscaled[4974]: control: NetInfo: NetInfo{varies=false hairpin=false ipv6=true ipv>...\n'})}),"\n",(0,s.jsx)(n.p,{children:"The service should already be configured to start and connect during boot or failure. Verify it once again."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl enable tailscaled\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If it was not set already, the command created a ",(0,s.jsx)(n.em,{children:"symlink"})," and print out the filenames."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The following steps are performed on your \ud83d\udcbb ",(0,s.jsx)(n.strong,{children:"personal computer"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"3-update-ssh-config",children:"3. Update SSH Config"}),"\n",(0,s.jsx)(n.p,{children:"As Tailscale uses internal static IP addresses on both ends of the tunnel, you must also update the SSH configuration to connect to the new IP once outside of your home network. On your personal computer, open up the SSH file using your preferred text editor."}),"\n",(0,s.jsxs)(i.A,{groupId:"editor",children:[(0,s.jsx)(o.A,{value:"vim",label:"Vim",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"vim ~/.ssh/config\n"})})}),(0,s.jsx)(o.A,{value:"nano",label:"Nano",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"nano ~/.ssh/config\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["If you want to connect to your node via Tailscale, you must use the new Tailscale IP instead. You will find this static and internal IP on the ",(0,s.jsx)(n.em,{children:"Tailscale Device Dashboard"}),". You can copy it over to a text file. Then dplicate the node's ",(0,s.jsx)(n.em,{children:"Host"})," entry and exchange the ",(0,s.jsx)(n.em,{children:"HostName"})," with the new IP and the ",(0,s.jsx)(n.em,{children:"Host"})," property with a new alias. The final entry should look like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"Host <ssh-device-alias-for-home-environment>\n  User <node-username>\n  HostName <node-ip>\n  Port <ssh-port>\n  IdentityFile ~/.ssh/<my-chosen-keyname>\n\nHost <ssh-device-alias-for-tailscale-environment>\n  User <node-username>\n  HostName <tailscale-node-ip>\n  Port <ssh-port>\n  IdentityFile ~/.ssh/<my-chosen-keyname>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Save the file and exit. Then try to connect to your node while Tailscale is active."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"ssh <ssh-device-alias-for-tailscale-environment>\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Exchange the ",(0,s.jsx)(n.code,{children:"<ssh-device-alias-for-tailscale-environment>"})," with the actual SSH device name."]})}),"\n",(0,s.jsx)(n.h2,{id:"4-update-grafana-dashboard",children:"4. Update Grafana Dashboard"}),"\n",(0,s.jsx)(n.p,{children:"If you want to visit your Grafana Dashboard outside your home network using Tailscale, you will need to adjust the IP once again. As you did with the SSH, having two different browser bookmarks is recommended: one for your home environment and one for the static Tailscale IP. Within your browser, you can find Grafana at the following address in case your VPN is activated:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"http://<tailscale-node-ip>:3000/login\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Exchange the ",(0,s.jsx)(n.code,{children:"<tailscale-node-ip>"})," with the actual IP address found in the ",(0,s.jsx)(n.em,{children:"Tailscale Device Dashboard"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"5-disable-key-expiry",children:"5. Disable Key Expiry"}),"\n",(0,s.jsxs)(n.p,{children:["By default, Tailscale session keys from devices expire after 180 days of being unused, meaning you wont be able to re-connect to your node without maintenance. If you want to raise the limit or turn key expiry off for your main devices, you can do so by navigating into the ",(0,s.jsx)(n.em,{children:"Tailscale Device Dashboard"})," once logged in to their web service. On your node device, click on the three dots menu behind the static Tailscale IP and either select ",(0,s.jsx)(n.em,{children:"Disable Expiry Date"})," or ",(0,s.jsx)(n.em,{children:"Specify Expiry Period"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Expiry settings are device-specific and can be adjusted anytime within the ",(0,s.jsx)(n.em,{children:"Tailscale Device Dashboard"}),"."]})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var t=a(6540);const s={},r=t.createContext(s);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:n},e.children)}},9365:(e,n,a)=>{a.d(n,{A:()=>i});a(6540);var t=a(4164);const s={tabItem:"tabItem_Ymn6"};var r=a(4848);function i({children:e,hidden:n,className:a}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.A)(s.tabItem,a),hidden:n,children:e})}}}]);