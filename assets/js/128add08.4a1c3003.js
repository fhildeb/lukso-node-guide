"use strict";(self.webpackChunklukso_node_guide=self.webpackChunklukso_node_guide||[]).push([[2031],{1470:(e,n,r)=>{r.d(n,{A:()=>w});var t=r(6540),a=r(4164),o=r(3104),i=r(6347),s=r(205),l=r(7485),c=r(1682),d=r(679);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:r,default:t}})=>({value:e,label:n,attributes:r,default:t})))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function m({queryString:e=!1,groupId:n}){const r=(0,i.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(a),(0,t.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace({...r.location,search:n.toString()})}),[a,r])]}function f(e){const{defaultValue:n,queryString:r=!1,groupId:a}=e,o=h(e),[i,l]=(0,t.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:o}))),[c,u]=m({queryString:r,groupId:a}),[f,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,a]=(0,d.Dv)(n);return[r,(0,t.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:a}),x=(()=>{const e=c??f;return p({value:e,tabValues:o})?e:null})();(0,s.A)((()=>{x&&l(x)}),[x]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)}),[u,g,o]),tabValues:o}}var g=r(2303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=r(4848);function v({className:e,block:n,selectedValue:r,selectValue:t,tabValues:i}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const n=e.currentTarget,a=s.indexOf(n),o=i[a].value;o!==r&&(l(n),t(o))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=s.indexOf(e.currentTarget)+1;n=s[r]??s[0];break}case"ArrowLeft":{const r=s.indexOf(e.currentTarget)-1;n=s[r]??s[s.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:t})=>(0,y.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:c,...t,className:(0,a.A)("tabs__item",x.tabItem,t?.className,{"tabs__item--active":r===e}),children:n??e},e)))})}function b({lazy:e,children:n,selectedValue:r}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===r));return e?(0,t.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function j(e){const n=f(e);return(0,y.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,y.jsx)(v,{...n,...e}),(0,y.jsx)(b,{...n,...e})]})}function w(e){const n=(0,g.A)();return(0,y.jsx)(j,{...e,children:u(e.children)},String(n))}},5215:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"guides/reports/validator-income","title":"13.1 Validator Income","description":"A guide for LUKSO homestakers on generating tax-ready validator income reports using the Validator Income Reporter tool and CoinMarketCap API.","source":"@site/docs/guides/reports/validator-income.md","sourceDirName":"guides/reports","slug":"/guides/reports/validator-income","permalink":"/docs/guides/reports/validator-income","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"13.1 Validator Income","sidebar_position":1,"description":"A guide for LUKSO homestakers on generating tax-ready validator income reports using the Validator Income Reporter tool and CoinMarketCap API."},"sidebar":"guidesSidebar","previous":{"title":"11.9 Restart Monitoring","permalink":"/docs/guides/maintenance/restart-monitoring"},"next":{"title":"13.2 Client Logs","permalink":"/docs/guides/reports/client-logs"}}');var a=r(4848),o=r(8453),i=r(1470),s=r(9365);const l={sidebar_label:"13.1 Validator Income",sidebar_position:1,description:"A guide for LUKSO homestakers on generating tax-ready validator income reports using the Validator Income Reporter tool and CoinMarketCap API."},c="13.1 Validator Income",d={},u=[{value:"1. Install Dependencies",id:"1-install-dependencies",level:2},{value:"2. Download and Setup",id:"2-download-and-setup",level:2},{value:"3. Configuration",id:"3-configuration",level:2},{value:"4. Generate Report",id:"4-generate-report",level:2},{value:"5. Exit Report Tool",id:"5-exit-report-tool",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"131-validator-income",children:"13.1 Validator Income"})}),"\n",(0,a.jsxs)(n.p,{children:["Generating accurate income reports can be challenging for LUKSO homestakers. Unlike staking providers, who often supply structured annual summaries, self-hosted validators must track their own consensus rewards and tips. Operators often point to a single withdrawal address. However, this method lacks clarity not supported by most tax systems, as the balance does not distinguish between earned staking income, withdrawals, or regular wallet transactions. While Portfolion Managers like ",(0,a.jsx)(n.a,{href:"https://rotki.com/",children:"Rotki"})," aim to help, they often only support bigger chains, making it hard for smaller networks to obtain reliable data."]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.a,{href:"https://github.com/fhildeb/validator-income-reporter",children:"Validator Income Reporter"})," is a command-line tool specifically designed to help LUKSO validators generate yearly staking income reports as CSV and PDF files. It uses the ",(0,a.jsx)(n.a,{href:"https://coinmarketcap.com/api/documentation/v1/",children:"CoinMarketCap API"})," to calculate historical fiat value, based on real-time price data for the given year and evaluates all withdrawals and mining rewards for a given address. Additional check ensure that normal transfers or trading activity is excluded."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"Income Reporter Preview",src:r(8920).A+"",width:"3432",height:"1930"})}),"\n",(0,a.jsx)(n.admonition,{title:"Features",type:"tip",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\ud83e\ude99 Collects daily income data from an ETH1 address for any given year"}),"\n",(0,a.jsx)(n.li,{children:"\ud83d\udcb8 Calculates FIAT revenue based on daily historical coin prices"}),"\n",(0,a.jsx)(n.li,{children:"\ud83d\udcca Exports collected metrics into a yearly CSV and PDF file"}),"\n"]})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["CoinMarketCap typically offers a free Hobbyist API tier for one month every year, sufficient for annual report generation. If you ",(0,a.jsx)(n.strong,{children:"dont want to use the CoinMarketCap API"}),", you can optionally use the ",(0,a.jsx)(n.code,{children:"--dry-run"})," flag to run the reporter ",(0,a.jsx)(n.strong,{children:"with a local CSV"})," file of daily median LYX prices. A sample file for EUR is attached to the repository."]})}),"\n",(0,a.jsx)(n.admonition,{title:"Tax Disclaimer",type:"warning",children:(0,a.jsx)(n.p,{children:"The tool's outputs should not be considered a substitute for professional advice from a qualified tax advisor, accountant, or lawyer. Users are advised to consult with appropriate professionals before making any decisions based on the data provided by the tool. The developers of this tool shall not be held responsible for any legal or tax-related consequences resulting from using the tool or its outputs, as they make no guarantees or warranties regarding the data's completeness, reliability, or accuracy."})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["The following steps are performed on your \ud83d\udcbb ",(0,a.jsx)(n.strong,{children:"personal computer"}),"."]})}),"\n",(0,a.jsx)(n.h2,{id:"1-install-dependencies",children:"1. Install Dependencies"}),"\n",(0,a.jsxs)(n.p,{children:["To run the reporting tool, you must install ",(0,a.jsx)(n.a,{href:"https://www.python.org/",children:"Python3"})," on your system."]}),"\n",(0,a.jsxs)(i.A,{groupId:"os",children:[(0,a.jsx)(s.A,{value:"windows",label:"Windows",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"winget install Python.Python.3\n"})})}),(0,a.jsx)(s.A,{value:"mac",label:"Mac",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'# Install Homebrew\n/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"\n\n# Install Python\nbrew install python\n'})})}),(0,a.jsx)(s.A,{value:"linux",label:"Linux",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"# Update Package Manager\nsudo apt update\n\n# Install Python and necessary Tools\nsudo apt install python3 python3-pip python3-venv\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"2-download-and-setup",children:"2. Download and Setup"}),"\n",(0,a.jsx)(n.p,{children:"First, clone the repository and set up a Python virtual environment to keep dependencies isolated."}),"\n",(0,a.jsxs)(i.A,{groupId:"os",children:[(0,a.jsx)(s.A,{value:"windows",label:"Windows",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"# Clone the Repository\ngit clone https://github.com/fhildeb/validator-income-reporter.git\n\n# Move into Directory\ncd validator-income-reporter\n\n# Create a Virtual Python Environment\npython -m venv reporter-environment\n\n# Install Necessary Dependencies\npip install requests pandas fpdf\n"})})}),(0,a.jsx)(s.A,{value:"mac-linux",label:"Mac and Linux",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"# Clone the Repository\ngit clone https://github.com/fhildeb/validator-income-reporter.git\n\n# Move into Directory\ncd validator-income-reporter\n\n# Create a Virtual Python Environment\npython3 -m venv reporter-environment\n\n# Install Necessary Dependencies\npip3 install requests pandas fpdf\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"3-configuration",children:"3. Configuration"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"3.1 API Preparation"}),": To fetch historical fiat prices, the tool requires you to provide a ",(0,a.jsx)(n.a,{href:"https://coinmarketcap.com/api/",children:"CoinMarketCap"})," API key."]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Create or log into your ",(0,a.jsx)(n.a,{href:"https://coinmarketcap.com/api/",children:(0,a.jsx)(n.strong,{children:"CoinmarketCap Account"})})," and open the dashboard."]}),"\n",(0,a.jsxs)(n.li,{children:["Add your Credentials to apply for a ",(0,a.jsx)(n.strong,{children:"Hobbist Tier"})," to fetch historical data."]}),"\n",(0,a.jsxs)(n.li,{children:["Copy your ",(0,a.jsx)(n.strong,{children:"CoinmarketCap API"})," key to your notes for later reference."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"3.2 Create Config File"}),": Create your personal configuration file based on the default template."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cp config-sample.py config.py\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"3.3 Adjust Config File"}),": Configure your report settings using the provided template."]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Open the ",(0,a.jsx)(n.strong,{children:"config.py"})," file using a text or code editor."]}),"\n",(0,a.jsxs)(n.li,{children:["Edit the ",(0,a.jsx)(n.strong,{children:"COINMARKETCAP_API_KEY"})," to house your copied API key."]}),"\n",(0,a.jsxs)(n.li,{children:["Set your ",(0,a.jsx)(n.strong,{children:"ETH1_ADDRESS"})," and ",(0,a.jsx)(n.strong,{children:"YEAR"})," to define your withdrawal address and period."]}),"\n",(0,a.jsxs)(n.li,{children:["Choose the ",(0,a.jsx)(n.strong,{children:"COINMARKETCAP_FIAT_ID"})," based on your native currency."]}),"\n",(0,a.jsxs)(n.li,{children:["Edit the ",(0,a.jsx)(n.strong,{children:"COINMARKETCAP_CRYPTO_ID"})," and chose ",(0,a.jsx)(n.strong,{children:"LYXe"})," for pre-2024 or ",(0,a.jsx)(n.strong,{children:"LYX"})," for post-2024 reports."]}),"\n",(0,a.jsxs)(n.li,{children:["Define the ",(0,a.jsx)(n.strong,{children:"COIN_NAME"})," and ",(0,a.jsx)(n.strong,{children:"FIAT_CURRENCY"})," based on your preferences."]}),"\n",(0,a.jsxs)(n.li,{children:["Specify the ",(0,a.jsx)(n.strong,{children:"REPORT_TITLE"})," to customize your printed PDF."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["An complete documentation can be found within the ",(0,a.jsx)(n.a,{href:"https://github.com/fhildeb/validator-income-reporter/blob/main/config-sample.py",children:"Default Configuration File"})," of the Repository."]})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["Great and free examples for code editors are \ud83e\udd8e ",(0,a.jsx)(n.a,{href:"https://notepad-plus-plus.org/",children:(0,a.jsx)(n.strong,{children:"Notepad++"})})," or \ud83d\udd39 ",(0,a.jsx)(n.a,{href:"https://code.visualstudio.com/",children:(0,a.jsx)(n.strong,{children:"Visual Studio Code"})}),"."]})}),"\n",(0,a.jsx)(n.h2,{id:"4-generate-report",children:"4. Generate Report"}),"\n",(0,a.jsx)(n.p,{children:"Once the software has been installed and configured, you can run the report script."}),"\n",(0,a.jsxs)(i.A,{groupId:"os",children:[(0,a.jsx)(s.A,{value:"windows",label:"Windows",default:!0,children:(0,a.jsxs)(i.A,{groupId:"prices",children:[(0,a.jsx)(s.A,{value:"api",label:"CoinMarketCap API",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Activate the Virtual Python Environment\nsource report-environment\\Scripts\\activate\n\n# Run Income Reporter Script\npython income_reporter.py\n"})})}),(0,a.jsx)(s.A,{value:"local",label:"Local CSV",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Activate the Virtual Python Environment\nsource report-environment\\Scripts\\activate\n\n# Run Income Reporter Script\npython income_reporter.py --dry-run ./price-data/median_lyx_prices_eur.csv\n"})})})]})}),(0,a.jsx)(s.A,{value:"mac-linux",label:"Mac and Linux",children:(0,a.jsxs)(i.A,{groupId:"prices",children:[(0,a.jsx)(s.A,{value:"api",label:"CoinMarketCap API",default:!0,children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Activate the Virtual Python Environment\nsource report-environment/bin/activate\n\n# Run Income Reporter Script\npython3 income_reporter.py\n"})})}),(0,a.jsx)(s.A,{value:"local",label:"Local CSV",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Activate the Virtual Python Environment\nsource report-environment/bin/activate\n\n# Run Income Reporter Script\npython3 income_reporter.py --dry-run ./price-data/median_lyx_prices_eur.csv\n"})})})]})})]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"The script's run-time will depend on the number of validators. If you have 10 validator keys and generate a report that is one year in the past, the script will need around 18 minutes. Every additional validator will approximately add 90 seconds."})}),"\n",(0,a.jsx)(n.h2,{id:"5-exit-report-tool",children:"5. Exit Report Tool"}),"\n",(0,a.jsx)(n.p,{children:"After the tool finished sucessfully, you will see the generated CSV and PDF files within the folder. They are both called income report and include the year and your address within the file name. After the files have been generated, the virtual environment can be deactivated."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Deactivate the Virtual Python Environment\ndeactivate\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>s});var t=r(6540);const a={},o=t.createContext(a);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},8920:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/income-reporter-1648263a26eee4be98c730a0206484ad.png"},9365:(e,n,r)=>{r.d(n,{A:()=>i});r(6540);var t=r(4164);const a={tabItem:"tabItem_Ymn6"};var o=r(4848);function i({children:e,hidden:n,className:r}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,r),hidden:n,children:e})}}}]);