"use strict";(globalThis.webpackChunklukso_node_guide=globalThis.webpackChunklukso_node_guide||[]).push([[1732],{5347(e,r,n){n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>g,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"guides/monitoring/grafana","title":"8.7 Grafana","description":"Learn how to securely install, configure, and run Grafana as a service to visualize node metrics collected through Prometheus.","source":"@site/docs/guides/monitoring/grafana.md","sourceDirName":"guides/monitoring","slug":"/guides/monitoring/grafana","permalink":"/docs/guides/monitoring/grafana","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_label":"8.7 Grafana","sidebar_position":7,"description":"Learn how to securely install, configure, and run Grafana as a service to visualize node metrics collected through Prometheus."},"sidebar":"guidesSidebar","previous":{"title":"8.6 Prometheus","permalink":"/docs/guides/monitoring/prometheus"},"next":{"title":"8.8 Dashboard Configuration","permalink":"/docs/guides/monitoring/dashboard-configuration"}}');var t=n(4848),a=n(8453),i=n(1470),o=n(9365);const d={sidebar_label:"8.7 Grafana",sidebar_position:7,description:"Learn how to securely install, configure, and run Grafana as a service to visualize node metrics collected through Prometheus."},c="8.7 Grafana",l={},h=[{value:"1. Create System User",id:"1-create-system-user",level:2},{value:"2. Install Grafana",id:"2-install-grafana",level:2},{value:"3. Service Configuration",id:"3-service-configuration",level:2},{value:"5. Start the Grafana Service",id:"5-start-the-grafana-service",level:2},{value:"6. Check Service Status",id:"6-check-service-status",level:2},{value:"7. Adjusting the Time Zone",id:"7-adjusting-the-time-zone",level:2},{value:"Maintenance",id:"maintenance",level:2},{value:"Revert Setup",id:"revert-setup",level:2}];function u(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components},{Details:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"87-grafana",children:"8.7 Grafana"})}),"\n",(0,t.jsxs)(r.p,{children:["Grafana is an analytics and interactive visualization tool that connects to the previously configured ",(0,t.jsx)(r.a,{href:"/docs/guides/monitoring/prometheus",children:"Prometheus"})," tool to display real-time metrics, logs, and alerting dashboards. This guide walks you through the process of installing Grafana and configuring it to run as a dedicated background service."]}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsxs)(r.p,{children:["Further details about node analytics can be found on the ",(0,t.jsx)(r.a,{href:"/docs/theory/node-operation/monitoring-tools",children:(0,t.jsx)(r.strong,{children:"Monitoring Tools"})})," page in the \ud83e\udde0 ",(0,t.jsx)(r.a,{href:"/docs/theory/preparations/node-specifications",children:(0,t.jsx)(r.strong,{children:"Theory"})})," section."]})}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.p,{children:["The following steps are performed on your \ud83d\udcdf ",(0,t.jsx)(r.strong,{children:"node server"}),"."]})}),"\n",(0,t.jsx)(r.h2,{id:"1-create-system-user",children:"1. Create System User"}),"\n",(0,t.jsx)(r.p,{children:"Running services as a system user with minimal privileges is a best practice, limiting damage if compromised. The Blackbox Exporter user will only be able to read and execute service-specific files. Use the system's user creation tool to add a new one."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo adduser --system grafana-server-worker --group --no-create-home\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Full Command Explanation"}),(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Flag"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsxs)("nobr",{children:[" ",(0,t.jsx)(r.code,{children:"--system"})," "]})}),(0,t.jsx)(r.td,{children:"Creates a system user, used to run services and daemons rather than for people to log in with."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsxs)("nobr",{children:[" ",(0,t.jsx)(r.code,{children:"--group"})," "]})}),(0,t.jsx)(r.td,{children:"Creates a new group with the same name as the user."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsxs)("nobr",{children:[" ",(0,t.jsx)(r.code,{children:"--no-create-home"})," "]})}),(0,t.jsx)(r.td,{children:"Prevents creation of a home directory since the service does not need one."})]})]})]})]}),"\n",(0,t.jsx)(r.p,{children:"If you want to confirm that the user has been created, you can search for it within the password file, housing all essential information for each user account. Using the search tool grep, we can check if the user exists within the file."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:'grep "grafana-server-worker" /etc/passwd\n'})}),"\n",(0,t.jsx)(r.p,{children:"The output should look similar to this:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-text",children:"grafana-server-worker:x:117:123::/home/grafana-server-worker:/usr/sbin/nologin\n"})}),"\n",(0,t.jsx)(r.h2,{id:"2-install-grafana",children:"2. Install Grafana"}),"\n",(0,t.jsx)(r.p,{children:"To add the Grafana server to your node, you have to install it's package. In the case of Grafana, the setup is more extensive than downloading a single executable and adding it to the binary tree yourself. We therefore use the package manager APT, which is also used for regular Linux or Ubuntu software. To verify the package's authenticity, we must first add the Grafana GPG software key to our system's keyring folder."}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsxs)(r.p,{children:["Further information about package management can be found on the ",(0,t.jsx)(r.a,{href:"/docs/theory/node-operation/utility-tools",children:(0,t.jsx)(r.strong,{children:"Utility Tools"})})," page in the \ud83e\udde0 ",(0,t.jsx)(r.a,{href:"/docs/theory/preparations/node-specifications",children:(0,t.jsx)(r.strong,{children:"Theory"})})," section."]})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.1 Add GPG Key"}),": Download and save Grafana's signing key to the system\u2019s keyring."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"cd\ncurl -fsSL https://packages.grafana.com/gpg.key|sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/grafana.gpg\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Full Command Explanation"}),(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Flag"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"-f"})}),(0,t.jsx)(r.td,{children:"Fails silently on errors to ensure the scripts does not continue on broken responses."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"-s"})}),(0,t.jsx)(r.td,{children:"Silent mode to suppress progress output."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"-S"})}),(0,t.jsx)(r.td,{children:"Shows errors even in silent mode."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"-L"})}),(0,t.jsx)(r.td,{children:"Follows redirects to the updated download location."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"|"})}),(0,t.jsxs)(r.td,{children:["Sends the output of ",(0,t.jsx)(r.code,{children:"curl"})," directly into the ",(0,t.jsx)(r.code,{children:"gpg"})," command."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"--dearmor"})}),(0,t.jsx)(r.td,{children:"Converts the ASCII key to binary so it can be used by APT."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"-o"})}),(0,t.jsx)(r.td,{children:"Defines the output location and stores the binary key in the trusted GPG folder."})]})]})]})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.2 Key Verification"}),": Verify if the Grafana Key was added using the ",(0,t.jsx)(r.em,{children:"gpg"})," command."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"gpg --no-default-keyring --keyring /etc/apt/trusted.gpg.d/grafana.gpg --list-keys\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Full Command Explanation"}),(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Flag"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"--no-default-keyring"})}),(0,t.jsxs)(r.td,{children:["Avoids loading the user\u2019s default keyring in ",(0,t.jsx)(r.code,{children:"~/.gnupg"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"--keyring"})}),(0,t.jsx)(r.td,{children:"Explicitly defines which keyring to use for listing trusted GPG keys."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"--list-keys"})}),(0,t.jsx)(r.td,{children:"Displays all public keys of a specified keyring for verification."})]})]})]})]}),"\n",(0,t.jsx)(r.p,{children:"You should find an entry similar to this:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-text",children:"/etc/apt/trusted.gpg.d/grafana.gpg\n----------------------------------\npub   rsa3072 2023-01-06 [SC] [expires: DATE]\n      0E22EB88E39E12277A7760AE9E439B102CF3C0C6\nuid           [ unknown] Grafana Labs <engineering@grafana.com>\nsub   rsa3072 2023-01-06 [E] [expires: DATE]\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.3 List Repository"}),": Add Grafana to the trusted repository list, to allow it's installation."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:'sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"\n'})}),"\n",(0,t.jsxs)(r.p,{children:["Press ",(0,t.jsx)(r.em,{children:"Enter"})," to continue fetching all the necessary packages."]}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"add-apt-repository"})," is the standard way to add additional repositories to your sources in Ubuntu and many other Debian-based systems. However, it requires additional software packages that were installed during the ",(0,t.jsx)(r.a,{href:"/docs/guides/monitoring/software-preparation",children:(0,t.jsx)(r.strong,{children:"Software Preparation"})}),". Ensure you've completed the previous steps."]})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.4 Update Package List"}),": Update the package list using the previous Grafana GPG key."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo apt update\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.5 List Grafana Versions"}),": Check available Grafana versions that can be installed."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"apt list -a grafana\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.6 Install Grafana"}),": Download the latest supported Grafana build from the package list."]}),"\n",(0,t.jsxs)(i.A,{groupId:"grafana",children:[(0,t.jsx)(o.A,{value:"latest",label:"Latest Grafana Version",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo apt install grafana\n"})})}),(0,t.jsx)(o.A,{value:"9.5.2",label:"Grafana Version 9.5.2",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo apt install grafana=9.5.2\n"})})})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.7 Freeze Updates"}),": Put Grafana Updates on hold so dashboards dont break during regular package updates."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo apt-mark hold grafana\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.8 Set Binary Permissions"}),": Set the correct owner and access rights for the executables."]}),"\n",(0,t.jsxs)(i.A,{groupId:"grafana",children:[(0,t.jsx)(o.A,{value:"latest",label:"Grafana Version 11+",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo chown -R grafana-server-worker:grafana-server-worker /usr/sbin/grafana-server\nsudo chmod 755 /usr/sbin/grafana-server\n"})})}),(0,t.jsx)(o.A,{value:"9.5.2",label:"Grafana Version 9.5.2",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo chown -R grafana-server-worker:grafana-server-worker /usr/sbin/grafana\nsudo chown -R grafana-server-worker:grafana-server-worker /usr/sbin/grafana-server\nsudo chmod 755 /usr/sbin/grafana\nsudo chmod 755 /usr/sbin/grafana-server\n"})})})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2.9 Set File Permissions"}),": Set the correct owner and access rights for the configuration and log files."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo chown -R grafana-server-worker:grafana-server-worker /etc/grafana\nsudo chown -R grafana-server-worker:grafana-server-worker /var/lib/grafana\nsudo chown -R grafana-server-worker:grafana-server-worker /var/log/grafana\nsudo chmod 755 /var/lib/grafana\n"})}),"\n",(0,t.jsx)(r.h2,{id:"3-service-configuration",children:"3. Service Configuration"}),"\n",(0,t.jsx)(r.p,{children:"Once the Grafana software was installed with the correct permissions, we can update it's default service configuration, that automatically starts Grafana during boot and restarts during crashes. The updated configuration will also check for logging and an internet connection before it starts up and uses the previously created user."}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsx)(r.p,{children:"Most of the default configuration remains untouched. Compare the content and only add missing or updated properties."})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"4.1 Create Service File"}),": Create a system service file using your preferred text editor."]}),"\n",(0,t.jsxs)(i.A,{groupId:"editor",children:[(0,t.jsx)(o.A,{value:"vim",label:"Vim",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo vim /lib/systemd/system/grafana-server.service\n"})})}),(0,t.jsx)(o.A,{value:"nano",label:"Nano",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo nano /lib/systemd/system/grafana-server.service\n"})})})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"4.2 Add Configuration"}),": Paste the following content using your preferred logging tool, then save and exit the file."]}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsxs)(r.p,{children:["Further details on Journal and System Logging can be found on the ",(0,t.jsx)(r.a,{href:"/docs/theory/node-operation/utility-tools",children:(0,t.jsx)(r.strong,{children:"Utility Tools"})})," page in the the \ud83e\udde0 ",(0,t.jsx)(r.a,{href:"/docs/theory/preparations/node-specifications",children:(0,t.jsx)(r.strong,{children:"Theory"})})," section."]})}),"\n",(0,t.jsxs)(i.A,{groupId:"logging-tool",children:[(0,t.jsx)(o.A,{value:"journal",label:"Journal Logging",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-text",children:"[Unit]\nDescription=Grafana instance\nDocumentation=http://docs.grafana.org\nWants=network-online.target\nAfter=network.target network-online.target postgresql.service mariadb.service mysql.service influxdb.service\n\n[Service]\nEnvironmentFile=/etc/default/grafana-server\nUser=grafana-server-worker\nGroup=grafana-server-worker\nType=simple\nRestart=on-failure\nWorkingDirectory=/usr/share/grafana\nRuntimeDirectory=grafana\nRuntimeDirectoryMode=0750\nExecStart=/usr/share/grafana/bin/grafana server                                     \\\n                            --config=${CONF_FILE}                                   \\\n                            --pidfile=${PID_FILE_DIR}/grafana-server.pid            \\\n                            --packaging=deb                                         \\\n                            cfg:default.paths.logs=${LOG_DIR}                       \\\n                            cfg:default.paths.data=${DATA_DIR}                      \\\n                            cfg:default.paths.plugins=${PLUGINS_DIR}                \\\n                            cfg:default.paths.provisioning=${PROVISIONING_CFG_DIR}\n\nLimitNOFILE=10000\nTimeoutStopSec=20\nCapabilityBoundingSet=\nDeviceAllow=\nLockPersonality=true\nMemoryDenyWriteExecute=false\nNoNewPrivileges=true\nPrivateDevices=true\nPrivateTmp=true\nProtectClock=true\nProtectControlGroups=true\nProtectHome=true\nProtectHostname=true\nProtectKernelLogs=true\nProtectKernelModules=true\nProtectKernelTunables=true\nProtectProc=invisible\nProtectSystem=full\nRemoveIPC=true\nRestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX\nRestrictNamespaces=true\nRestrictRealtime=true\nRestrictSUIDSGID=true\nSystemCallArchitectures=native\nUMask=0027\nRestartSec=5\nSyslogIdentifier=grafana-server\nStandardOutput=journal\nStandardError=journal\nPrivateUsers=true\n\n[Install]\nWantedBy=multi-user.target\n"})})}),(0,t.jsx)(o.A,{value:"system",label:"System Logging",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-text",children:"[Unit]\nDescription=Grafana instance\nDocumentation=http://docs.grafana.org\nWants=network-online.target\nAfter=network.target network-online.target postgresql.service mariadb.service mysql.service influxdb.service\n\n[Service]\nEnvironmentFile=/etc/default/grafana-server\nUser=grafana-server-worker\nGroup=grafana-server-worker\nType=simple\nRestart=on-failure\nWorkingDirectory=/usr/share/grafana\nRuntimeDirectory=grafana\nRuntimeDirectoryMode=0750\nExecStart=/usr/share/grafana/bin/grafana server                                     \\\n                            --config=${CONF_FILE}                                   \\\n                            --pidfile=${PID_FILE_DIR}/grafana-server.pid            \\\n                            --packaging=deb                                         \\\n                            cfg:default.paths.logs=${LOG_DIR}                       \\\n                            cfg:default.paths.data=${DATA_DIR}                      \\\n                            cfg:default.paths.plugins=${PLUGINS_DIR}                \\\n                            cfg:default.paths.provisioning=${PROVISIONING_CFG_DIR}\n\nLimitNOFILE=10000\nTimeoutStopSec=20\nCapabilityBoundingSet=\nDeviceAllow=\nLockPersonality=true\nMemoryDenyWriteExecute=false\nNoNewPrivileges=true\nPrivateDevices=true\nPrivateTmp=true\nProtectClock=true\nProtectControlGroups=true\nProtectHome=true\nProtectHostname=true\nProtectKernelLogs=true\nProtectKernelModules=true\nProtectKernelTunables=true\nProtectProc=invisible\nProtectSystem=full\nRemoveIPC=true\nRestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX\nRestrictNamespaces=true\nRestrictRealtime=true\nRestrictSUIDSGID=true\nSystemCallArchitectures=native\nUMask=0027\nRestartSec=5\nSyslogIdentifier=grafana-server\nStandardOutput=syslog\nStandardError=syslog\nPrivateUsers=true\n\n[Install]\nWantedBy=multi-user.target\n"})})})]}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Full Property Explanation"}),(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Property"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Description"})}),(0,t.jsxs)(r.td,{children:["A human-readable description of the service shown in ",(0,t.jsx)(r.code,{children:"systemctl status"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Documentation"})}),(0,t.jsx)(r.td,{children:"Link to documentation of the software that is being used for this service file."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Wants"})}),(0,t.jsxs)(r.td,{children:["The service should try to start ",(0,t.jsx)(r.code,{children:"network-online.target"})," before starting Grafana."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"After"})}),(0,t.jsxs)(r.td,{children:["- ",(0,t.jsx)(r.code,{children:"network.target"}),": Ensures networking setup is enabled before the service is started. ",(0,t.jsx)("br",{})," - ",(0,t.jsx)(r.code,{children:"network-online.target"}),": Waits for the network to be fully online. ",(0,t.jsx)("br",{})," - ",(0,t.jsx)(r.code,{children:"postgresql.service"}),": Ensures the PostgreSQL database service is started. ",(0,t.jsx)("br",{})," - ",(0,t.jsx)(r.code,{children:"mariadb.service"}),": Waits for the MariaDB backend database to launch. ",(0,t.jsx)("br",{})," - ",(0,t.jsx)(r.code,{children:"mysql.service"}),": Ensures the MySQL server is running for data sourcing. ",(0,t.jsx)("br",{})," - ",(0,t.jsx)(r.code,{children:"influxdb.service"}),": Waits for the InfluxDB database as dashboard dependency."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"EnvironmentFile"})}),(0,t.jsx)(r.td,{children:"Specifies a file containing the service's environment variables used during startup."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"User"})}),(0,t.jsxs)(r.td,{children:["Executes the service as the ",(0,t.jsx)(r.code,{children:"grafana-server-worker"})," user."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Group"})}),(0,t.jsxs)(r.td,{children:["Executes the service under the ",(0,t.jsx)(r.code,{children:"grafana-server-worker"})," group."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Type"})}),(0,t.jsxs)(r.td,{children:["Indicates running at a ",(0,t.jsx)(r.code,{children:"simple"})," service in the foreground without forking."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Restart"})}),(0,t.jsxs)(r.td,{children:["Restarts the service ",(0,t.jsx)(r.code,{children:"on-failure"})," for a variety of reasons."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"WorkingDirectory"})}),(0,t.jsx)(r.td,{children:"Sets the working directory for the executed process."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RuntimeDirectory"})}),(0,t.jsx)(r.td,{children:"Sets the runtime directory before start, removed when the service stops."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RuntimeDirectoryMode"})}),(0,t.jsx)(r.td,{children:"Sets the file mode permissions for the runtime directory."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ExecStart"})}),(0,t.jsxs)(r.td,{children:["Link to binary at ",(0,t.jsx)(r.code,{children:"/usr/share/grafana/bin/grafana"}),", started with the command."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"LimitNOFILE"})}),(0,t.jsx)(r.td,{children:"Controls the maximum number of file descriptors the service can open."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"TimeoutStopSec"})}),(0,t.jsx)(r.td,{children:"Specifies the maximum time the service should stop before being forcibly terminated."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"LockPersonality"})}),(0,t.jsx)(r.td,{children:"The service's kernel personality setting will be locked to prevent changes."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"MemoryDenyWriteExecute"})}),(0,t.jsx)(r.td,{children:"Determines whether the service can create writable and executable memory mappings."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"NoNewPrivileges"})}),(0,t.jsx)(r.td,{children:"Prevents privilege escalation which processes can be apply for."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"PrivateDevices"})}),(0,t.jsx)(r.td,{children:"The service will not have access to any physical devices."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"PrivateTmp"})}),(0,t.jsxs)(r.td,{children:["Creates an isolated ",(0,t.jsx)(r.code,{children:"/tmp"})," directory for the service."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectClock"})}),(0,t.jsx)(r.td,{children:"The service cannot change the system clock if enabled."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectControlGroups"})}),(0,t.jsx)(r.td,{children:"Prevents the service from altering process resource limits and accounting settings."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectHome"})}),(0,t.jsx)(r.td,{children:"Used to prevent the service from accessing the user's home directories."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectHostname"})}),(0,t.jsx)(r.td,{children:"The service cannot change the system's hostname if enabled."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectKernelLogs"})}),(0,t.jsx)(r.td,{children:"Prevents the service to access sensitive kernel log ring data."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectKernelModules"})}),(0,t.jsx)(r.td,{children:"Prevents the service from altering the system's hardware capabilities."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectKernelTunables"})}),(0,t.jsx)(r.td,{children:"Denies modifying kernel variables, restricting its ability to alter the system's behavior."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectProc"})}),(0,t.jsxs)(r.td,{children:["Restricts the visibility of other processes in ",(0,t.jsx)(r.code,{children:"/proc"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ProtectSystem"})}),(0,t.jsx)(r.td,{children:"Specifies where the service can write files to the disk."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RemoveIPC"})}),(0,t.jsx)(r.td,{children:"If enabled, it ill remove all connection objects when logging out."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RestrictAddressFamilies"})}),(0,t.jsx)(r.td,{children:"Restricts the socket address families the service can use."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RestrictNamespaces"})}),(0,t.jsx)(r.td,{children:"Limits the types of Linux namespaces the process can access."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RestrictRealtime"})}),(0,t.jsx)(r.td,{children:"Blocks acquiring real-time scheduling of the operation system."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RestrictSUIDSGID"})}),(0,t.jsx)(r.td,{children:"Restricts creation or use of privilege files."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"SystemCallArchitectures"})}),(0,t.jsx)(r.td,{children:"Restricts the system calls the service can execute to a specific architecture."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"UMask"})}),(0,t.jsx)(r.td,{children:"Sets the default file creation permissions for the service."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"WantedBy"})}),(0,t.jsxs)(r.td,{children:["Binds the service to the ",(0,t.jsx)(r.code,{children:"multi-user.target"}),", so it starts during all boot processes."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"RestartSec"})}),(0,t.jsx)(r.td,{children:"Delay in seconds before restarting the service."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"SyslogIdentifier"})}),(0,t.jsxs)(r.td,{children:["Tags logs from the service with ",(0,t.jsx)(r.code,{children:"grafana-server"})," to help distinguish them."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"StandardOutput"})}),(0,t.jsx)(r.td,{children:"Sends regular service logs to the journal or syslog system."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"StandardError"})}),(0,t.jsx)(r.td,{children:"Sends error service logs to the journal or syslog system."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"PrivateUsers"})}),(0,t.jsxs)(r.td,{children:["Runs the service in its own namespace mapped to ",(0,t.jsx)(r.code,{children:"nobody"})," and ",(0,t.jsx)(r.code,{children:"nogroup"}),"."]})]})]})]})]}),"\n",(0,t.jsx)(r.admonition,{type:"warning",children:(0,t.jsxs)(r.p,{children:["If you renamed the user, make sure to update both ",(0,t.jsx)(r.code,{children:"User"})," and ",(0,t.jsx)(r.code,{children:"Group"})," values to prevent running the service as ",(0,t.jsx)(r.code,{children:"root"}),"."]})}),"\n",(0,t.jsx)(r.h2,{id:"5-start-the-grafana-service",children:"5. Start the Grafana Service"}),"\n",(0,t.jsx)(r.p,{children:"After setting up the service, you can enable and start the system service."}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"5.1 Reload Daemon"}),": Reload the system daemon to include the new service."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl daemon-reload\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"5.2 Start Service"}),": Start the Grafana service using the system control."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl start grafana-server\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"5.3 Enable Autostart on Boot"}),": Enable the service to start automatically during boot."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl enable grafana-server\n"})}),"\n",(0,t.jsx)(r.p,{children:"The output should look similar to this:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-text",children:"Synchronizing state of grafana-server.service with SysV service script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install enable grafana-server\nCreated symlink /etc/systemd/system/multi-user.target.wants/grafana-server.service \u2192 /lib/systemd/system/grafana-server.service.\n"})}),"\n",(0,t.jsx)(r.h2,{id:"6-check-service-status",children:"6. Check Service Status"}),"\n",(0,t.jsx)(r.p,{children:"You can fetch the current status from the system control to check if the Grafana service is running and configured correctly. The command will display whether it is active, enabled, or disabled and show recent log entries."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl status grafana-server\n"})}),"\n",(0,t.jsx)(r.p,{children:"The output should look similar to this:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-text",children:"\u25cf grafana-server.service - Grafana instance\n     Loaded: loaded (/lib/systemd/system/grafana-server.service; enabled; vendo>\n     Active: active (running) since [DATE] UTC; [TIME] ago\n       Docs: http://docs.grafana.org\n   Main PID: 84000 (grafana)\n      Tasks: 17 (limit: 38043)\n     Memory: 65.7M\n        CPU: 3.855s\n     CGroup: /system.slice/grafana-server.service\n             \u2514\u250084000 /usr/share/grafana/bin/grafana server --config=/etc/grafan>\n\n[DATE] [TIME] [USER] grafana[84000]: logger=modules t=2023-05-18T15:09:2>...\n...\n"})}),"\n",(0,t.jsx)(r.h2,{id:"7-adjusting-the-time-zone",children:"7. Adjusting the Time Zone"}),"\n",(0,t.jsx)(r.p,{children:"To solve issues when having different timezones set on your node and your personal computer, but also ensure sure that metrics have the correct timestamp, you can update the default time settings which Grafana is applying under the hood."}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"7.1 Verify Timezone"}),": Check if the wanted timezone is already set on your node."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"timedatectl\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"7.2 Update Timezone"}),": If there is an time offset, update your node's timezone."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo timedatectl set-timezone <your-timezone>\n"})}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.p,{children:["Exchange ",(0,t.jsx)(r.code,{children:"<your-timezone>"})," with one of the ",(0,t.jsx)(r.a,{href:"https://gist.github.com/adamgen/3f2c30361296bbb45ada43d83c1ac4e5",children:"Available Timezone Names"}),"."]})}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsx)(r.p,{children:"Timestamp changes take immediate effect for all services and log files."})}),"\n",(0,t.jsx)(r.h2,{id:"maintenance",children:"Maintenance"}),"\n",(0,t.jsxs)(r.p,{children:["Proper maintenance ensures that all the components are working as intended and can be updated on the fly.\n",(0,t.jsx)(r.strong,{children:"Logging"}),": Check the latest status of the system service."]}),"\n",(0,t.jsxs)(i.A,{groupId:"logging-tool",children:[(0,t.jsx)(o.A,{value:"journal",label:"Journal Logging",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo journalctl -f -u grafana-server\n"})})}),(0,t.jsx)(o.A,{value:"system",label:"System Logging",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo tail -f /var/log/syslog | grep grafana-server\n"})})})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Restarting"}),": If you made any changes or updates to configuration, reload the system daemon and start the exporter."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl daemon-reload\nsudo systemctl restart grafana-server\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Stopping"}),": You can stop the exporter using the system control."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl stop grafana-server\n"})}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsxs)(r.p,{children:["Further information about system control or logging can be found on the ",(0,t.jsx)(r.a,{href:"/docs/theory/node-operation/utility-tools",children:(0,t.jsx)(r.strong,{children:"Utility Tools"})})," page in the \ud83e\udde0 ",(0,t.jsx)(r.a,{href:"/docs/theory/preparations/node-specifications",children:(0,t.jsx)(r.strong,{children:"Theory"})})," section."]})}),"\n",(0,t.jsx)(r.h2,{id:"revert-setup",children:"Revert Setup"}),"\n",(0,t.jsx)(r.p,{children:"If something went wrong, you can remove the user or delete the service and related files all together."}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"1. Stop and Disable Service"}),": Stop the tool and remove it's service link from the system's boot."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo systemctl stop grafana-server\nsudo systemctl disable grafana-server\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"2. Change Binary Ownership"}),": Change the owner of the Grafana and Grafana Server executables."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo chown -R root:root /usr/sbin/grafana\nsudo chown -R root:root /usr/sbin/grafana-server\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"3. Change Folder Ownership"}),": Change the owner of the configuration and database folers."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo chown -R root:root /etc/grafana\nsudo chown -R root:root /var/lib/grafana\nsudo chown -R root:root /var/log/grafana\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"4. Remove the Service and Config Files"}),": Delete all service files and reload the system daemon."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo rm /lib/systemd/system/grafana-server.service\nsudo rm -rf /etc/grafana\nsudo rm -rf /var/lib/grafana\nsudo rm -rf /var/log/grafana\nsudo systemctl daemon-reload\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"5. Delete Binary"}),": Remove the executable Grafana and Grafana Server from your system."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo rm -rf /usr/sbin/grafana-server\nsudo rm -rf /usr/sbin/grafana\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"6. Remove User and Group"}),": Prune the user and all it's cached configurations."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"sudo deluser --remove-all-files grafana-server-worker\nsudo delgroup grafana-server-worker\n"})})]})}function g(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},9365(e,r,n){n.d(r,{A:()=>i});n(6540);var s=n(4164);const t="tabItem_Ymn6";var a=n(4848);function i({children:e,hidden:r,className:n}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.A)(t,n),hidden:r,children:e})}},1470(e,r,n){n.d(r,{A:()=>S});var s=n(6540),t=n(4164),a=n(7559),i=n(3104),o=n(6347),d=n(205),c=n(7485),l=n(1682),h=n(679);function u(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function g(e){const{values:r,children:n}=e;return(0,s.useMemo)(()=>{const e=r??function(e){return u(e).map(({props:{value:e,label:r,attributes:n,default:s}})=>({value:e,label:r,attributes:n,default:s}))}(n);return function(e){const r=(0,l.XI)(e,(e,r)=>e.value===r.value);if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[r,n])}function x({value:e,tabValues:r}){return r.some(r=>r.value===e)}function j({queryString:e=!1,groupId:r}){const n=(0,o.W6)(),t=function({queryString:e=!1,groupId:r}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:e,groupId:r});return[(0,c.aZ)(t),(0,s.useCallback)(e=>{if(!t)return;const r=new URLSearchParams(n.location.search);r.set(t,e),n.replace({...n.location,search:r.toString()})},[t,n])]}function f(e){const{defaultValue:r,queryString:n=!1,groupId:t}=e,a=g(e),[i,o]=(0,s.useState)(()=>function({defaultValue:e,tabValues:r}){if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${r.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=r.find(e=>e.default)??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:r,tabValues:a})),[c,l]=j({queryString:n,groupId:t}),[u,f]=function({groupId:e}){const r=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,t]=(0,h.Dv)(r);return[n,(0,s.useCallback)(e=>{r&&t.set(e)},[r,t])]}({groupId:t}),p=(()=>{const e=c??u;return x({value:e,tabValues:a})?e:null})();(0,d.A)(()=>{p&&o(p)},[p]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!x({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),l(e),f(e)},[l,f,a]),tabValues:a}}var p=n(2303);const m="tabList__CuJ",v="tabItem_LNqP";var y=n(4848);function b({className:e,block:r,selectedValue:n,selectValue:s,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),c=e=>{const r=e.currentTarget,t=o.indexOf(r),i=a[t].value;i!==n&&(d(r),s(i))},l=e=>{let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;r=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;r=o[n]??o[o.length-1];break}}r?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":r},e),children:a.map(({value:e,label:r,attributes:s})=>(0,y.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{o.push(e)},onKeyDown:l,onClick:c,...s,className:(0,t.A)("tabs__item",v,s?.className,{"tabs__item--active":n===e}),children:r??e},e))})}function w({lazy:e,children:r,selectedValue:n}){const a=(Array.isArray(r)?r:[r]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===n);return e?(0,s.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:a.map((e,r)=>(0,s.cloneElement)(e,{key:r,hidden:e.props.value!==n}))})}function k(e){const r=f(e);return(0,y.jsxs)("div",{className:(0,t.A)(a.G.tabs.container,"tabs-container",m),children:[(0,y.jsx)(b,{...r,...e}),(0,y.jsx)(w,{...r,...e})]})}function S(e){const r=(0,p.A)();return(0,y.jsx)(k,{...e,children:u(e.children)},String(r))}},8453(e,r,n){n.d(r,{R:()=>i,x:()=>o});var s=n(6540);const t={},a=s.createContext(t);function i(e){const r=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:r},e.children)}}}]);