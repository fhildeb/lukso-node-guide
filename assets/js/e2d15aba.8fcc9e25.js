"use strict";(globalThis.webpackChunklukso_node_guide=globalThis.webpackChunklukso_node_guide||[]).push([[7442],{4609(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"guides/maintenance/software-updates","title":"11.1 Software Updates","description":"Learn how to securely update system packages, perform cleanups, and maintain your LUKSO node\'s software stack for peak performance and reliability.","source":"@site/docs/guides/maintenance/software-updates.md","sourceDirName":"guides/maintenance","slug":"/guides/maintenance/software-updates","permalink":"/docs/guides/maintenance/software-updates","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"11.1 Software Updates","sidebar_position":1,"description":"Learn how to securely update system packages, perform cleanups, and maintain your LUKSO node\'s software stack for peak performance and reliability."},"sidebar":"guidesSidebar","previous":{"title":"10.1 Tailscale","permalink":"/docs/guides/external-access/tailscale"},"next":{"title":"11.2 Client Updates","permalink":"/docs/guides/maintenance/client-updates"}}');var r=a(4848),t=a(8453),o=a(1470),l=a(9365);const i={sidebar_label:"11.1 Software Updates",sidebar_position:1,description:"Learn how to securely update system packages, perform cleanups, and maintain your LUKSO node's software stack for peak performance and reliability."},d="11.1 Software Updates",c={},u=[{value:"1. Retrieve Outdated Packages",id:"1-retrieve-outdated-packages",level:2},{value:"2. Stop Node Operation",id:"2-stop-node-operation",level:2},{value:"3. Apply Software Updates",id:"3-apply-software-updates",level:2},{value:"4. System Cleanup",id:"4-system-cleanup",level:2},{value:"5. Restart the Node",id:"5-restart-the-node",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"111-software-updates",children:"11.1 Software Updates"})}),"\n",(0,r.jsx)(n.p,{children:"This guide explains how to update system software, and perform cleanups, important for security and performance."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["The following steps are performed on your \ud83d\udcdf ",(0,r.jsx)(n.strong,{children:"node server"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"1-retrieve-outdated-packages",children:"1. Retrieve Outdated Packages"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Update Package List\nsudo apt update\n\n# List Upgradable Packages\napt list --upgradable\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Monitoring Compatability",type:"warning",children:(0,r.jsxs)(n.p,{children:["The monitoring tool ",(0,r.jsx)(n.a,{href:"/docs/guides/monitoring/grafana",children:"Grafana"})," is installed as a system package. If you want to prevent incompatibilities, its recommended to pause these updates until the latest dashboard templates are available for your blockchain clients."]})}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsx)(l.A,{value:"hold",label:"Pause Grafana Updates",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo apt-mark hold grafana\n"})})}),(0,r.jsx)(l.A,{value:"unhold",label:"Resume Grafana Updates",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo apt-mark unhold grafana\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"2-stop-node-operation",children:"2. Stop Node Operation"}),"\n",(0,r.jsx)(n.p,{children:"Depending on your setup method, there are different ways to stop your node before applying updates."}),"\n",(0,r.jsxs)(o.A,{groupId:"setup",children:[(0,r.jsxs)(l.A,{value:"cli",label:"LUKSO CLI",default:!0,children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cd <lukso-working-directory>\nlukso stop\n"})}),(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Exchange ",(0,r.jsx)(n.code,{children:"<lukso-working-directory>"})," with the path of the node folder."]})})]}),(0,r.jsx)(l.A,{value:"automation",label:"Service Automation",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo systemctl stop lukso-validator\n"})})})]}),"\n",(0,r.jsxs)(a,{children:[(0,r.jsx)("summary",{children:"Force Client Shutdown"}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(l.A,{value:"geth",label:"Geth",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill geth\n"})})}),(0,r.jsx)(l.A,{value:"erigon",label:"Erigon",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill erigon\n"})})}),(0,r.jsx)(l.A,{value:"nethermind",label:"Nethermind",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill nethermind\n"})})}),(0,r.jsx)(l.A,{value:"besu",label:"Besu",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill besu\n"})})}),(0,r.jsx)(l.A,{value:"teku",label:"Teku",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill teku\n"})})}),(0,r.jsx)(l.A,{value:"nimbus2",label:"Nimbus-Eth2",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill nimbus_beacon_node\nsudo pkill nimbus_validator_client\n"})})}),(0,r.jsxs)(l.A,{value:"lighthouse",label:"Lighthouse",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill lighthouse\n"})}),(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"The Lighthouse client uses a single binary for both the consensus and validator processes."})})]}),(0,r.jsx)(l.A,{value:"prysm",label:"Prysm",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo pkill prysm\nsudo pkill validator\n"})})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"3-apply-software-updates",children:"3. Apply Software Updates"}),"\n",(0,r.jsx)(n.p,{children:"Update all currently installed packages and hardware drivers to their latest versions and reboot to apply changes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo apt upgrade\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"When prompted during upgrade:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Choose to keep your current SSH configuration (",(0,r.jsx)(n.code,{children:"<OK>"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Acknowledge updates to system libraries and services (",(0,r.jsx)(n.code,{children:"<OK>"}),")"]}),"\n"]})]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Kernel and background services will update after a system reboot."})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo reboot\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"You will be logged out of the SSH connection. Once the system rebooted, reconnect using SSH to continue."})}),"\n",(0,r.jsx)(n.h2,{id:"4-system-cleanup",children:"4. System Cleanup"}),"\n",(0,r.jsx)(n.p,{children:"Remove unnecessary packages and clean up outdated cache data of system installation processes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Remove Unused Dependencies\nsudo apt autoremove\n\n# Clean Cached Package Files\nsudo apt autoclean\n"})}),"\n",(0,r.jsx)(n.h2,{id:"5-restart-the-node",children:"5. Restart the Node"}),"\n",(0,r.jsx)(n.p,{children:"Depending on your setup method, there are different ways to start your node."}),"\n",(0,r.jsxs)(o.A,{groupId:"setup",children:[(0,r.jsxs)(l.A,{value:"clinode",label:"LUKSO CLI Node",default:!0,children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cd <lukso-working-directory>\nlukso start --checkpoint-sync\n"})}),(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Exchange ",(0,r.jsx)(n.code,{children:"<lukso-working-directory>"})," with the path of the node folder."]})})]}),(0,r.jsxs)(l.A,{value:"clivalidator",label:"LUKSO CLI Validator",default:!0,children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'cd <lukso-working-directory>\nlukso start --validator --transaction-fee-recipient "<your-fee-recipient-address>" --checkpoint-sync\n'})}),(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"The following properties need to be exchanged:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<lukso-working-directory>"})," with the path of the node folder"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<your-fee-recipient-address>"})," with the wallet address receiving staking profits"]}),"\n"]})]})]}),(0,r.jsxs)(l.A,{value:"automation",label:"Service Automation",children:[(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"If the system was rebooted before, automated services like the validator node should restart automatically. You can check the current status of the service to clarify whether it is necessary to start it manually or if updates introduced any problems."})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo systemctl status lukso-validator\n"})}),(0,r.jsx)(n.p,{children:"If the service is not active or you did not reboot your node, you can start the service manually."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo systemctl start lukso-validator\n"})})]})]}),"\n",(0,r.jsx)(n.p,{children:"After the clients were started, verify that their services are still up."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo lukso status\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/theory/node-operation/monitoring-tools",children:(0,r.jsx)(n.strong,{children:"Monitoring Tools"})})," like ",(0,r.jsx)(n.a,{href:"/docs/guides/monitoring/grafana",children:"Grafana"}),", ",(0,r.jsx)(n.a,{href:"/docs/guides/monitoring/prometheus",children:"Prometheus"}),", or the ",(0,r.jsx)(n.a,{href:"/docs/guides/monitoring/node-exporter",children:"Exporter"})," services will automatically start during the system reboot."]})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},9365(e,n,a){a.d(n,{A:()=>o});a(6540);var s=a(4164);const r="tabItem_Ymn6";var t=a(4848);function o({children:e,hidden:n,className:a}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,s.A)(r,a),hidden:n,children:e})}},1470(e,n,a){a.d(n,{A:()=>N});var s=a(6540),r=a(4164),t=a(7559),o=a(3104),l=a(6347),i=a(205),d=a(7485),c=a(1682),u=a(679);function h(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:a}=e;return(0,s.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:a,default:s}})=>({value:e,label:n,attributes:a,default:s}))}(a);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,a])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const a=(0,l.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(r),(0,s.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})},[r,a])]}function f(e){const{defaultValue:n,queryString:a=!1,groupId:r}=e,t=p(e),[o,l]=(0,s.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find(e=>e.default)??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:t})),[d,c]=g({queryString:a,groupId:r}),[h,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,r]=(0,u.Dv)(n);return[a,(0,s.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),x=(()=>{const e=d??h;return m({value:e,tabValues:t})?e:null})();(0,i.A)(()=>{x&&l(x)},[x]);return{selectedValue:o,selectValue:(0,s.useCallback)(e=>{if(!m({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),f(e)},[c,f,t]),tabValues:t}}var x=a(2303);const j="tabList__CuJ",b="tabItem_LNqP";var y=a(4848);function v({className:e,block:n,selectedValue:a,selectValue:s,tabValues:t}){const l=[],{blockElementScrollPositionUntilNextRender:i}=(0,o.a_)(),d=e=>{const n=e.currentTarget,r=l.indexOf(n),o=t[r].value;o!==a&&(i(n),s(o))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=l.indexOf(e.currentTarget)+1;n=l[a]??l[0];break}case"ArrowLeft":{const a=l.indexOf(e.currentTarget)-1;n=l[a]??l[l.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:s})=>(0,y.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...s,className:(0,r.A)("tabs__item",b,s?.className,{"tabs__item--active":a===e}),children:n??e},e))})}function k({lazy:e,children:n,selectedValue:a}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===a);return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==a}))})}function w(e){const n=f(e);return(0,y.jsxs)("div",{className:(0,r.A)(t.G.tabs.container,"tabs-container",j),children:[(0,y.jsx)(v,{...n,...e}),(0,y.jsx)(k,{...n,...e})]})}function N(e){const n=(0,x.A)();return(0,y.jsx)(w,{...e,children:h(e.children)},String(n))}},8453(e,n,a){a.d(n,{R:()=>o,x:()=>l});var s=a(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);