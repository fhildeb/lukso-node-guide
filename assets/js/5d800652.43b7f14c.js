"use strict";(self.webpackChunklukso_node_guide=self.webpackChunklukso_node_guide||[]).push([[219],{1470:(e,s,r)=>{r.d(s,{A:()=>k});var n=r(6540),t=r(4164),a=r(3104),i=r(6347),o=r(205),l=r(7485),d=r(1682),c=r(679);function h(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:s,children:r}=e;return(0,n.useMemo)((()=>{const e=s??function(e){return h(e).map((({props:{value:e,label:s,attributes:r,default:n}})=>({value:e,label:s,attributes:r,default:n})))}(r);return function(e){const s=(0,d.XI)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,r])}function p({value:e,tabValues:s}){return s.some((s=>s.value===e))}function g({queryString:e=!1,groupId:s}){const r=(0,i.W6)(),t=function({queryString:e=!1,groupId:s}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:e,groupId:s});return[(0,l.aZ)(t),(0,n.useCallback)((e=>{if(!t)return;const s=new URLSearchParams(r.location.search);s.set(t,e),r.replace({...r.location,search:s.toString()})}),[t,r])]}function f(e){const{defaultValue:s,queryString:r=!1,groupId:t}=e,a=u(e),[i,l]=(0,n.useState)((()=>function({defaultValue:e,tabValues:s}){if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=s.find((e=>e.default))??s[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:s,tabValues:a}))),[d,h]=g({queryString:r,groupId:t}),[f,x]=function({groupId:e}){const s=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,t]=(0,c.Dv)(s);return[r,(0,n.useCallback)((e=>{s&&t.set(e)}),[s,t])]}({groupId:t}),m=(()=>{const e=d??f;return p({value:e,tabValues:a})?e:null})();(0,o.A)((()=>{m&&l(m)}),[m]);return{selectedValue:i,selectValue:(0,n.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),x(e)}),[h,x,a]),tabValues:a}}var x=r(2303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(4848);function j({className:e,block:s,selectedValue:r,selectValue:n,tabValues:i}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,a.a_)(),d=e=>{const s=e.currentTarget,t=o.indexOf(s),a=i[t].value;a!==r&&(l(s),n(a))},c=e=>{let s=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;s=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;s=o[r]??o[o.length-1];break}}s?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":s},e),children:i.map((({value:e,label:s,attributes:n})=>(0,v.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{o.push(e)},onKeyDown:c,onClick:d,...n,className:(0,t.A)("tabs__item",m.tabItem,n?.className,{"tabs__item--active":r===e}),children:s??e},e)))})}function b({lazy:e,children:s,selectedValue:r}){const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(e){const e=a.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:a.map(((e,s)=>(0,n.cloneElement)(e,{key:s,hidden:e.props.value!==r})))})}function y(e){const s=f(e);return(0,v.jsxs)("div",{className:(0,t.A)("tabs-container",m.tabList),children:[(0,v.jsx)(j,{...s,...e}),(0,v.jsx)(b,{...s,...e})]})}function k(e){const s=(0,x.A)();return(0,v.jsx)(y,{...e,children:h(e.children)},String(s))}},5531:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"guides/modifications/slasher-configuration","title":"7.1 Slasher Configuration","description":"Enable or disable the LUKSO slasher service to detect validator misbehavior. Configure slasher flags for CLI and automated setups, and remove slasher data to save disk space.","source":"@site/docs/guides/modifications/slasher-configuration.md","sourceDirName":"guides/modifications","slug":"/guides/modifications/slasher-configuration","permalink":"/docs/guides/modifications/slasher-configuration","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"7.1 Slasher Configuration","sidebar_position":1,"description":"Enable or disable the LUKSO slasher service to detect validator misbehavior. Configure slasher flags for CLI and automated setups, and remove slasher data to save disk space."},"sidebar":"guidesSidebar","previous":{"title":"6.4 Validator Configuration","permalink":"/docs/guides/client-setup/validator-configuration"},"next":{"title":"7.2 Custom Node Name","permalink":"/docs/guides/modifications/custom-node-name"}}');var t=r(4848),a=r(8453),i=r(1470),o=r(9365);const l={sidebar_label:"7.1 Slasher Configuration",sidebar_position:1,description:"Enable or disable the LUKSO slasher service to detect validator misbehavior. Configure slasher flags for CLI and automated setups, and remove slasher data to save disk space."},d="7.1 Slasher Configuration",c={},h=[{value:"1. Stop Node Operation",id:"1-stop-node-operation",level:2},{value:"2. Configure Slasher Service",id:"2-configure-slasher-service",level:2},{value:"4. Remove Slasher Data",id:"4-remove-slasher-data",level:2}];function u(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Details:r}=s;return r||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"71-slasher-configuration",children:"7.1 Slasher Configuration"})}),"\n",(0,t.jsx)(s.p,{children:"Running a slasher service helps monitor and report malicious validator behavior, contributing to the overall health and security of the network. This guide explains how to enable or disable the slasher for regular nodes and validators."}),"\n",(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsxs)(s.p,{children:["Further details can be found on the ",(0,t.jsx)(s.a,{href:"/docs/theory/blockchain-knowledge/slashing-and-panelties",children:(0,t.jsx)(s.strong,{children:"Slashing and Panelties"})})," and ",(0,t.jsx)(s.a,{href:"/docs/theory/node-operation/slasher-service",children:"Slasher Service"})," pages in the \ud83e\udde0 ",(0,t.jsx)(s.a,{href:"/docs/theory/preparations/node-specifications",children:(0,t.jsx)(s.strong,{children:"Theory"})})," section."]})}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["The following steps are performed on your \ud83d\udcdf ",(0,t.jsx)(s.strong,{children:"node server"}),"."]})}),"\n",(0,t.jsx)(s.h2,{id:"1-stop-node-operation",children:"1. Stop Node Operation"}),"\n",(0,t.jsx)(s.p,{children:"Depending on your setup method, there are different ways to stop your node before applying updates."}),"\n",(0,t.jsxs)(i.A,{groupId:"setup",children:[(0,t.jsxs)(o.A,{value:"cli",label:"LUKSO CLI",default:!0,children:[(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"cd <lukso-working-directory>\nlukso stop\n"})}),(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Exchange ",(0,t.jsx)(s.code,{children:"<lukso-working-directory>"})," with the path of the node folder."]})})]}),(0,t.jsx)(o.A,{value:"automation",label:"Service Automation",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo systemctl stop lukso-validator\n"})})})]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Force Client Shutdown"}),(0,t.jsxs)(i.A,{children:[(0,t.jsx)(o.A,{value:"geth",label:"Geth",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill geth\n"})})}),(0,t.jsx)(o.A,{value:"erigon",label:"Erigon",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill erigon\n"})})}),(0,t.jsx)(o.A,{value:"nethermind",label:"Nethermind",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill nethermind\n"})})}),(0,t.jsx)(o.A,{value:"besu",label:"Besu",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill besu\n"})})}),(0,t.jsx)(o.A,{value:"teku",label:"Teku",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill teku\n"})})}),(0,t.jsx)(o.A,{value:"nimbus2",label:"Nimbus-Eth2",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill nimbus_beacon_node\nsudo pkill nimbus_validator_client\n"})})}),(0,t.jsxs)(o.A,{value:"lighthouse",label:"Lighthouse",children:[(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill lighthouse\n"})}),(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsx)(s.p,{children:"The Lighthouse client uses a single binary for both the consensus and validator processes."})})]}),(0,t.jsx)(o.A,{value:"prysm",label:"Prysm",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo pkill prysm\nsudo pkill validator\n"})})})]})]}),"\n",(0,t.jsx)(s.h2,{id:"2-configure-slasher-service",children:"2. Configure Slasher Service"}),"\n",(0,t.jsxs)(s.p,{children:["If you are running a validator node using the ",(0,t.jsx)(s.a,{href:"/docs/theory/node-operation/client-setups",children:"LUKSO CLI"})," setup, the slasher is activated by default to increase watchers for malicious events during network downtimes of bigger services. For regular nodes or custom setups, the slasher service is disabled."]}),"\n",(0,t.jsx)(s.p,{children:"If you are runnning on lower end hardware or prefer to safe disk space, you can disable it. Regular nodes can use the similar process to activate the additional service without participating in the consensus."}),"\n",(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.strong,{children:"Teku"})," and ",(0,t.jsx)(s.strong,{children:"Nimbus-Eth2"})," clients do not have separate ",(0,t.jsx)(s.a,{href:"/docs/theory/node-operation/slasher-service",children:"slasher services"})," that create a database and keep track of the historical misbehaviours. Instead, they only come with validator precautions such as ",(0,t.jsx)(s.a,{href:"https://docs.teku.consensys.io/how-to/prevent-slashing/use-a-slashing-protection-file",children:(0,t.jsx)(s.code,{children:"slashing-protection"})})," or ",(0,t.jsx)(s.a,{href:"https://nimbus.guide/doppelganger-detection.html",children:(0,t.jsx)(s.code,{children:"doppelganger-detection"})})," that check against their own keys before committing validator duties."]})}),"\n",(0,t.jsxs)(i.A,{groupId:"slasher",children:[(0,t.jsxs)(o.A,{value:"disable",label:"Disable Slasher for Validators",default:!0,children:[(0,t.jsx)(s.p,{children:"Depending on your setup method, there are different ways to start your staking node without the slasher service."}),(0,t.jsxs)(i.A,{groupId:"setup",children:[(0,t.jsxs)(o.A,{value:"cli",label:"LUKSO CLI",default:!0,children:[(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'cd <lukso-working-directory>\n\n# Start Mainnet Validator without Slasher\nlukso start --validator --transaction-fee-recipient "<your-fee-recipient-address>" --checkpoint-sync -no-slasher\n\n# Start Testnet Validator without Slasher\nlukso start --testnet --validator --transaction-fee-recipient "<your-fee-recipient-address>" --checkpoint-sync -no-slasher\n'})}),(0,t.jsxs)(s.admonition,{type:"info",children:[(0,t.jsx)(s.p,{children:"The following properties need to be exchanged:"}),(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<lukso-working-directory>"})," with the path of the node folder"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"<your-fee-recipient-address>"})," with the wallet address receiving staking profits"]}),"\n"]})]})]}),(0,t.jsxs)(o.A,{value:"automation",label:"Service Automation",children:[(0,t.jsx)(s.p,{children:"Open the startup script within your node directory with your preferred text editor."}),(0,t.jsxs)(i.A,{groupId:"editor",children:[(0,t.jsx)(o.A,{value:"vim",label:"Vim",default:!0,children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo vim <lukso-working-directory>/static/lukso_startup.sh\n"})})}),(0,t.jsx)(o.A,{value:"nano",label:"Nano",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo nano <lukso-working-directory>/static/lukso_startup.sh\n"})})})]}),(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Exchange ",(0,t.jsx)(s.code,{children:"<lukso-working-directory>"})," with the path to the node folder."]})}),(0,t.jsx)(s.p,{children:"Add the flag to disable the slasher service as a new line to the start command, then save and exit the file."}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:'exec /usr/local/bin/lukso start \\\n        --validator \\\n        --validator-wallet-password ./static/<your-generic-password-file> \\\n        --transaction-fee-recipient "<your-fee-recipient-address>" \\\n        --checkpoint-sync \\\n        --no-slasher\n'})}),(0,t.jsx)(s.p,{children:"After the startup script was updated, you can restart the node by executing the related service."}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo systemctl start lukso-validator\n"})})]})]})]}),(0,t.jsxs)(o.A,{value:"activate",label:"Activate Slasher for Regular Nodes",children:[(0,t.jsxs)(s.p,{children:["Depending on your setup method, there are different ways to start your regular node with the slasher service flags. The custom flags provided during startup will be passed down from the ",(0,t.jsx)(s.a,{href:"https://github.com/lukso-network/tools-lukso-cli",children:"LUKSO CLI"})," to the consensus clients."]}),(0,t.jsxs)(i.A,{groupId:"setup",children:[(0,t.jsxs)(o.A,{value:"cli",label:"LUKSO CLI",default:!0,children:[(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"cd <lukso-working-directory>\n"})}),(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Exchange ",(0,t.jsx)(s.code,{children:"<lukso-working-directory>"})," with the path to the node folder."]})}),(0,t.jsxs)(i.A,{groupId:"client",children:[(0,t.jsx)(o.A,{value:"lighthouse",label:"Lighthouse",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"# Start Mainnet Slasher Node\nlukso start --checkpoint-sync --lighthouse-slasher\n\n# Start Testnet Slasher Node\nlukso start --testnet --checkpoint-sync --lighthouse-slasher\n"})})}),(0,t.jsx)(o.A,{value:"prysm",label:"Prysm",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"# Start Mainnet Slasher Node\nlukso start --checkpoint-sync --prysm-slasher\n\n# Start Testnet Slasher Node\nlukso start --testnet --checkpoint-sync --prysm-slasher\n"})})})]})]}),(0,t.jsxs)(o.A,{value:"automation",label:"Service Automation",children:[(0,t.jsx)(s.p,{children:"Open the startup script within your node directory with your preferred text editor."}),(0,t.jsxs)(i.A,{groupId:"editor",children:[(0,t.jsx)(o.A,{value:"vim",label:"Vim",default:!0,children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"cd <lukso-working-directory>/static\nvim lukso_startup.sh\n"})})}),(0,t.jsx)(o.A,{value:"nano",label:"Nano",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"cd <lukso-working-directory>/static\nnano lukso_startup.sh\n"})})})]}),(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Exchange ",(0,t.jsx)(s.code,{children:"<lukso-working-directory>"})," with the path to the node folder."]})}),(0,t.jsx)(s.p,{children:"Add the flag to activate the slasher service as a new line to the start command, then save and exit the file."}),(0,t.jsxs)(i.A,{groupId:"client",children:[(0,t.jsx)(o.A,{value:"lighthouse",label:"Lighthouse",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:'exec /usr/local/bin/lukso start \\\n        --validator \\\n        --validator-wallet-password ./static/<your-generic-password-file> \\\n        --transaction-fee-recipient "<your-fee-recipient-address>" \\\n        --checkpoint-sync \\\n        --lighthouse-slasher\n'})})}),(0,t.jsx)(o.A,{value:"prysm",label:"Prysm",children:(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:'exec /usr/local/bin/lukso start \\\n        --validator \\\n        --validator-wallet-password ./static/<your-generic-password-file> \\\n        --transaction-fee-recipient "<your-fee-recipient-address>" \\\n        --checkpoint-sync \\\n        --prysm-slasher\n'})})})]}),(0,t.jsx)(s.p,{children:"After the startup script was updated, you can restart the node by executing the related service."}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo systemctl start lukso-validator\n"})})]})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"After the clients were started, verify that their services are still up."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo lukso status\n"})}),"\n",(0,t.jsx)(s.h2,{id:"4-remove-slasher-data",children:"4. Remove Slasher Data"}),"\n",(0,t.jsx)(s.p,{children:"If you previously ran a slasher service, you can delete the unused database from your node directory and free storage space."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"cd <lukso-working-directory>\n\n# Remove Slasher Database for Mainnet Node\nrm -rf /mainnet-data/consensus/beaconchaindata/slasher.db\n\n# Remove Slasher Database for Testnet Node\nrm -rf /testnet-data/consensus/beaconchaindata/slasher.db\n"})}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Exchange ",(0,t.jsx)(s.code,{children:"<lukso-working-directory>"})," with the path to the node folder."]})})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>o});var n=r(6540);const t={},a=n.createContext(t);function i(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(a.Provider,{value:s},e.children)}},9365:(e,s,r)=>{r.d(s,{A:()=>i});r(6540);var n=r(4164);const t={tabItem:"tabItem_Ymn6"};var a=r(4848);function i({children:e,hidden:s,className:r}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,n.A)(t.tabItem,r),hidden:s,children:e})}}}]);