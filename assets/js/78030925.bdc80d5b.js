"use strict";(globalThis.webpackChunklukso_node_guide=globalThis.webpackChunklukso_node_guide||[]).push([[9679],{8278(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"guides/client-setup/firewall-settings","title":"6.1 Firewall Settings","description":"Open and manage required network ports for your LUKSO node. Learn which TCP/UDP ports each Ethereum client needs and how to configure your firewall for secure and stable node operation.","source":"@site/docs/guides/client-setup/firewall-settings.md","sourceDirName":"guides/client-setup","slug":"/guides/client-setup/firewall-settings","permalink":"/docs/guides/client-setup/firewall-settings","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"6.1 Firewall Settings","sidebar_position":1,"description":"Open and manage required network ports for your LUKSO node. Learn which TCP/UDP ports each Ethereum client needs and how to configure your firewall for secure and stable node operation."},"sidebar":"guidesSidebar","previous":{"title":"5.3 Authentication","permalink":"/docs/guides/ssh-setup/authentication"},"next":{"title":"6.2 Router Port Arrangement","permalink":"/docs/guides/client-setup/router-port-arrangement"}}');var s=r(4848),o=r(8453),i=r(1470),l=r(9365);const a={sidebar_label:"6.1 Firewall Settings",sidebar_position:1,description:"Open and manage required network ports for your LUKSO node. Learn which TCP/UDP ports each Ethereum client needs and how to configure your firewall for secure and stable node operation."},c="6.1 Firewall Settings",d={},h=[{value:"1. Open Network Ports",id:"1-open-network-ports",level:2},{value:"2. Configure Firewall",id:"2-configure-firewall",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"61-firewall-settings",children:"6.1 Firewall Settings"})}),"\n",(0,s.jsx)(n.p,{children:"A tightly controlled firewall lets your node participate in peer-to-peer networks while blocking unsolicited traffic. This page lists the mandatory ports for each supported blockchain client of the LUKSO network, followed by firewall commands to open their communication channels and check current their current status."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Please ensure you have a basic understanding of blockchain networks before operating a node. If you're not yet familiar with ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/proof-of-stake",children:(0,s.jsx)(n.strong,{children:"Proof of Stake"})}),", ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/tokenomics",children:(0,s.jsx)(n.strong,{children:"Tokenomics"})}),", ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/slashing-and-panelties",children:(0,s.jsx)(n.strong,{children:"Panelties"})}),", ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/client-types",children:(0,s.jsx)(n.strong,{children:"Client Types"})})," or ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/client-providers",children:(0,s.jsx)(n.strong,{children:"Client Providers"})}),", please refer to the \ud83e\udde0 ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/proof-of-stake",children:(0,s.jsx)(n.strong,{children:"Theory"})})," section."]})}),"\n",(0,s.jsx)(n.h2,{id:"1-open-network-ports",children:"1. Open Network Ports"}),"\n",(0,s.jsx)(n.p,{children:"Your node needs specific inbound ports open so that execution and consensus clients can exchange blocks, transactions, and peer\u2011discovery messages. Below is a list of the TCP and UDP ports each client uses. By opening these ports on your node\u2019s firewall, you ensure that your client stays in sync and reachable by the wider network."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Consensus clients rely on broad outbound connectivity to discover other nodes, meaning only inbound traffic will be restricted."})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"PORT"}),(0,s.jsx)(n.th,{children:"CLIENT"}),(0,s.jsx)(n.th,{children:"DESCRIPTION"}),(0,s.jsx)(n.th,{children:"TCP"}),(0,s.jsx)(n.th,{children:"UDP"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"30303"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"https://github.com/ethereum/go-ethereum#configuration",children:"Geth"})," \u2197 ",(0,s.jsx)("br",{}),(0,s.jsx)(n.a,{href:"https://github.com/ledgerwatch/erigon#default-ports-and-firewalls",children:"Erigon"})," \u2197 ",(0,s.jsx)("br",{})," ",(0,s.jsx)(n.a,{href:"https://www.quicknode.com/guides/infrastructure/node-setup/how-to-run-nethermind-node#firewall-configuration",children:"Nethermind"})," \u2197 ",(0,s.jsx)("br",{})," ",(0,s.jsx)(n.a,{href:"https://besu.hyperledger.org/stable/public-networks/how-to/connect/configure-ports#:~:text=To%20enable%20Prometheus%20to%20access,defaults%20are%209545%20and%209001%20.",children:"Besu"})," \u2197"]}),(0,s.jsx)(n.td,{children:"Execution Chain Data & Discovery"}),(0,s.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,s.jsx)(n.td,{children:"\u2714\ufe0f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"9000"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"https://lighthouse-book.sigmaprime.io/faq.html?highlight=9000#do-i-need-to-set-up-any-port-mappings",children:"Lighthouse"})," \u2197 ",(0,s.jsx)("br",{})," ",(0,s.jsx)(n.a,{href:"https://docs.teku.consensys.io/how-to/find-and-connect/improve-connectivity#configure-ports",children:"Teku"})," \u2197 ",(0,s.jsx)("br",{})," ",(0,s.jsx)(n.a,{href:"https://nimbus.guide/networking.html",children:"Nimbus-Eth2"})," \u2197 ",(0,s.jsx)("br",{})]}),(0,s.jsx)(n.td,{children:"Beacon Gossip & Data"}),(0,s.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,s.jsx)(n.td,{children:"\u2714\ufe0f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"13000"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"https://docs.prylabs.network/docs/prysm-usage/p2p-host-ip#configure-your-firewall",children:"Prysm"})," \u2197"]}),(0,s.jsx)(n.td,{children:"Beacon Gossip, Requests, Responses"}),(0,s.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"12000"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.a,{href:"https://docs.prylabs.network/docs/prysm-usage/p2p-host-ip#configure-your-firewall",children:"Prysm"})," \u2197"]}),(0,s.jsx)(n.td,{children:"Beacon Discovery, Data Exchange"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"\u2714\ufe0f"})]})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Clients use extra ports for monitoring, which don't need firewall exposure. Check the ",(0,s.jsx)(n.a,{href:"/docs/guides/monitoring/port-configuration",children:(0,s.jsx)(n.strong,{children:"Monitoring"})})," chapter for details."]})}),"\n",(0,s.jsx)(n.h2,{id:"2-configure-firewall",children:"2. Configure Firewall"}),"\n",(0,s.jsx)(n.p,{children:"You can apply the specific port settings to your firewall."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The following step is performed on your \ud83d\udcbb ",(0,s.jsx)(n.strong,{children:"personal computer"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"2.1 Node Connection"}),": ",(0,s.jsx)(n.em,{children:"Log in to your node if you are not already connected."})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"ssh <ssh-device-alias>\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The following steps are performed on your \ud83d\udcdf ",(0,s.jsx)(n.strong,{children:"node server"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"2.2 Add Port Rules"}),": ",(0,s.jsx)(n.em,{children:"Allow the TCP and UDP ports depending on which clients you want to operate."})]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"You will have to chose one execution client and one consensus client."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Execution Clients"}),": Geth, Erigon, Nethermind, Besu"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Consensus Clients"}),": Prysm, Lighthouse, Teku, Nimbus-Eth2"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["Further details about ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/client-types",children:(0,s.jsx)(n.strong,{children:"Client Types"})})," and ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/client-providers",children:(0,s.jsx)(n.strong,{children:"Client Providers"})})," can be found in the \ud83e\udde0 ",(0,s.jsx)(n.a,{href:"/docs/theory/blockchain-knowledge/proof-of-stake",children:(0,s.jsx)(n.strong,{children:"Theory"})})," section."]})]}),"\n",(0,s.jsxs)(i.A,{children:[(0,s.jsx)(l.A,{value:"execution",label:"Geth, Erigon, Nethermind, Besu",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo ufw allow 30303/tcp\nsudo ufw allow 30303/udp\n"})})}),(0,s.jsx)(l.A,{value:"consensus",label:"Lighthouse, Teku, Nimbus-Eth2",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo ufw allow 9000/tcp\nsudo ufw allow 9000/udp\n"})})}),(0,s.jsx)(l.A,{value:"prysm",label:"Prysm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo ufw allow 13000/tcp\nsudo ufw allow 12000/udp\n"})})})]}),"\n",(0,s.jsx)(n.p,{children:"The output of each command should always show:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"Rule added\nRule added (v6)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"2.3 Check Configuration"}),": ",(0,s.jsx)(n.em,{children:"Verify the new firewall rules."})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo ufw status\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output should look similar to this:"}),"\n",(0,s.jsxs)(i.A,{children:[(0,s.jsx)(l.A,{value:"lh-teku-nimbus",label:"Execution Client + Lighthouse, Teku, or Nimbus-Eth2",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"Status: active\n\nTo                               Action      From\n--                               ------      ----\n<preferred-ssh-port>/tcp         ALLOW       Anywhere\n30303/tcp                        ALLOW       Anywhere\n30303/udp                        ALLOW       Anywhere\n9000/tcp                         ALLOW       Anywhere\n<preferred-ssh-port>/tcp (v6)    ALLOW       Anywhere (v6)\n30303/tcp (v6)                   ALLOW       Anywhere (v6)\n30303/udp (v6)                   ALLOW       Anywhere (v6)\n9000/tcp (v6)                    ALLOW       Anywhere (v6)\n"})})}),(0,s.jsx)(l.A,{value:"prysm",label:"Execution Client + Prysm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"Status: active\n\nTo                               Action      From\n--                               ------      ----\n<preferred-ssh-port>/tcp         ALLOW       Anywhere\n30303/tcp                        ALLOW       Anywhere\n30303/udp                        ALLOW       Anywhere\n13000/tcp                        ALLOW       Anywhere\n12000/udp                        ALLOW       Anywhere\n<preferred-ssh-port>/tcp (v6)    ALLOW       Anywhere (v6)\n30303/tcp (v6)                   ALLOW       Anywhere (v6)\n30303/udp (v6)                   ALLOW       Anywhere (v6)\n13000/tcp (v6)                   ALLOW       Anywhere (v6)\n12000/udp (v6)                   ALLOW       Anywhere (v6)\n"})})})]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"<preferred-ssh-port>"})," property will be exchanged with your actual SSH port."]})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["If something is missing, retry to apply the above rules or have a look into the ",(0,s.jsx)(n.a,{href:"/docs/guides/system-setup/firewall-configuration",children:"firewall configuration"})," for further details."]})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["If all required ports are featured with the ",(0,s.jsx)(n.code,{children:"ALLOW"})," property, your node\u2019s local firewall is correctly configured. To expose these ports at the network level, you will have to proceed to configure the router\u2019s port forwarding rules."]})}),"\n",(0,s.jsx)(n.p,{children:"If you need to modify the firewall rules, such as removing an unwanted port rule, you can list them all."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo ufw status\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["To ",(0,s.jsx)(n.code,{children:"delete"})," a specific port rule using ",(0,s.jsx)(n.code,{children:"UFW"}),", type the ",(0,s.jsx)(n.code,{children:"<rule-number>"})," that is no longer required."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo ufw delete <rule-number>\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},9365(e,n,r){r.d(n,{A:()=>i});r(6540);var t=r(4164);const s="tabItem_Ymn6";var o=r(4848);function i({children:e,hidden:n,className:r}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,t.A)(s,r),hidden:n,children:e})}},1470(e,n,r){r.d(n,{A:()=>A});var t=r(6540),s=r(4164),o=r(7559),i=r(3104),l=r(6347),a=r(205),c=r(7485),d=r(1682),h=r(679);function u(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,t.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:r,default:t}})=>({value:e,label:n,attributes:r,default:t}))}(r);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function f({value:e,tabValues:n}){return n.some(n=>n.value===e)}function x({queryString:e=!1,groupId:n}){const r=(0,l.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,t.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})},[s,r])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:s}=e,o=p(e),[i,l]=(0,t.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:o})),[c,d]=x({queryString:r,groupId:s}),[u,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,s]=(0,h.Dv)(n);return[r,(0,t.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),j=(()=>{const e=c??u;return f({value:e,tabValues:o})?e:null})();(0,a.A)(()=>{j&&l(j)},[j]);return{selectedValue:i,selectValue:(0,t.useCallback)(e=>{if(!f({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),g(e)},[d,g,o]),tabValues:o}}var j=r(2303);const m="tabList__CuJ",w="tabItem_LNqP";var y=r(4848);function b({className:e,block:n,selectedValue:r,selectValue:t,tabValues:o}){const l=[],{blockElementScrollPositionUntilNextRender:a}=(0,i.a_)(),c=e=>{const n=e.currentTarget,s=l.indexOf(n),i=o[s].value;i!==r&&(a(n),t(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:o.map(({value:e,label:n,attributes:t})=>(0,y.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...t,className:(0,s.A)("tabs__item",w,t?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:r}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find(e=>e.props.value===r);return e?(0,t.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:o.map((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function k(e){const n=g(e);return(0,y.jsxs)("div",{className:(0,s.A)(o.G.tabs.container,"tabs-container",m),children:[(0,y.jsx)(b,{...n,...e}),(0,y.jsx)(v,{...n,...e})]})}function A(e){const n=(0,j.A)();return(0,y.jsx)(k,{...e,children:u(e.children)},String(n))}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>l});var t=r(6540);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);